(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["package-mine-share"],{"01ad":function(t,e,n){"use strict";n.r(e);var a=n("b3e5"),i=n("526d");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("b810");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"0d2d3605",null,!1,a["a"],void 0);e["default"]=s.exports},"07b1":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("bf0f"),n("5ef2"),n("c223"),n("5c47"),n("7a76"),n("c9b5");var i=a(n("5de6")),r=a(n("2634")),o=a(n("2fdc")),s={data:function(){return{qrCode:"",realShow:!1,cacheImage:"",canvasId:"poster",canvasStyle:{width:"610rpx",height:"950rpx",opacity:0},pixelRatio:3}},mounted:function(){},methods:{show:function(t){var e=this;return(0,o.default)((0,r.default)().mark((function n(){return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:""==e.qrCode&&e.req({url:"/v1/share/getMiniQrcode",data:{invite_code:t},success:function(t){console.log(t),200==t.code&&(e.qrCode=t.data)}}),e.realShow=!0;case 2:case"end":return n.stop()}}),n)})))()},close:function(){this.realShow=!1},handleNetworkImgaeTransferTempImage:function(t){return new Promise((function(e){0===t.indexOf("http")?uni.downloadFile({url:t,success:function(t){e(t.tempFilePath)}}):e(t)}))},removeSave:function(){return new Promise((function(t,e){var n=uni.getFileSystemManager(),a="".concat(wx.env.USER_DATA_PATH,"/").concat("tmp_base64src",".").concat("jpeg");n.unlink({filePath:a,success:function(e){t(!0)},fail:function(e){t(!0)}})}))},handleBase64ImageTransferTempImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tmp_base64src",n=uni.getFileSystemManager();return new Promise((function(a,r){var o=/data:image\/(\w+);base64,(.*)/.exec(t)||[],s=(0,i.default)(o,3),u=s[1],l=s[2];u||r(new Error("ERROR_BASE64SRC_PARSE"));var c="".concat(wx.env.USER_DATA_PATH,"/").concat(e,".").concat(u);n.writeFile({filePath:c,data:l,encoding:"base64",success:function(){a(c)},fail:function(){r(new Error("ERROR_BASE64SRC_WRITE"))}})}))},htmlToCanvas:function(){var t=this;return(0,o.default)((0,r.default)().mark((function e(){var n,a,i,s;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.qrCode){e.next=3;break}return uni.showLoading({title:"生成海报失败",duration:3e3}),e.abrupt("return");case 3:n=t,uni.showLoading({title:"正在生成海报"}),a=uni.createCanvasContext(t.canvasId,t),i=uni.getSystemInfoSync(),s=i.windowWidth/750,"https://xcooo.oss-cn-hangzhou.aliyuncs.com/wxapp/share_bg.png",uni.getImageInfo({src:"https://xcooo.oss-cn-hangzhou.aliyuncs.com/wxapp/share_bg.png",success:function(){var e=(0,o.default)((0,r.default)().mark((function e(i){var o;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(i),"getImageInfo:ok"!=i.errMsg){e.next=12;break}return a.drawImage(i.path,0,0,610*s,1050*s),e.next=5,t.removeSave();case 5:return e.next=7,t.handleBase64ImageTransferTempImage(t.qrCode);case 7:o=e.sent,o&&a.drawImage(o,155*s,415*s,300*s,300*s),setTimeout((function(){a.draw(!0,(function(){uni.canvasToTempFilePath({canvasId:t.canvasId,success:function(t){console.log("结果",t),n.cacheImage=t.tempFilePath,n.saveImage()},fail:function(t){throw new Error(t)}},n)})),uni.hideLoading()}),100),e.next=14;break;case 12:uni.showToast({title:"生成海报失败，稍后再试",duration:2e3,icon:"none"}),uni.hideLoading();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 10:case"end":return e.stop()}}),e)})))()},saveImage:function(){var t=this;return(0,o.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.saveImageToPhotosAlbum({filePath:t.cacheImage,success:function(t){console.log("保存结果",t),uni.showToast({title:"海报保存成功",duration:2e3})},fail:function(t){uni.showToast({title:"保存失败，稍后再试",duration:2e3,icon:"none"})}});case 2:case"end":return e.stop()}}),e)})))()},authToSave:function(){var t=this;uni.authorize({scope:"scope.writePhotosAlbum",success:function(){uni.showLoading({title:"正在保存海报"}),""!=t.cacheImage?uni.getImageInfo({src:t.cacheImage,success:function(e){uni.saveImageToPhotosAlbum({filePath:t.cacheImage,success:function(){t.realShow=!1,uni.$u.toast("图片已成功保存到相册")}})},fail:function(t){console.log(t)}}):t.authToSave()},complete:function(t){uni.hideLoading(),uni.getSetting({success:function(t){t.authSetting["scope.writePhotosAlbum"]||uni.showModal({content:"没有授权保存图片到相册,点击确定去允许授权",success:function(t){t.confirm?uni.openSetting({success:function(t){}}):t.cancel&&uni.showModal({cancelText:"取消",confirmText:"重新授权",content:"你点击了取消，将无法进行保存操作",success:function(t){t.confirm?uni.openSetting({success:function(t){}}):t.cancel&&console.log("用户不授权")}})}})}})}})},canvasIdErrorCallback:function(t){console.log(t)},savePoster:function(){this.htmlToCanvas()}}};e.default=s},"0b05":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uNavbar:n("1e19").default,uIcon:n("d28f").default,uPopup:n("56c3").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("u-navbar",{attrs:{title:"邀请有奖"}}),n("v-uni-view",{staticClass:"invite"},[n("v-uni-image",{staticClass:"bg",attrs:{src:t.mainbg,mode:"widthFix"}}),t.userInfo?n("v-uni-view",{staticClass:"invite-earnings"},[n("v-uni-view",{staticClass:"earnings-list"},[n("v-uni-view",{staticClass:"earnings-list-text"},[t._v("当前收益")]),n("v-uni-view",{staticClass:"earnings-list-price"},[t._v(t._s(t.userInfo.gold)),n("v-uni-text",[t._v("元")])],1),n("v-uni-view",{staticClass:"earnings-list-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$common.to({url:"wallet"})}}},[t._v("查看详情"),n("u-icon",{attrs:{name:"arrow-right",size:"22"}})],1)],1),n("v-uni-view",{staticClass:"earnings-list"},[n("v-uni-view",{staticClass:"earnings-list-text"},[t._v("可提现收益")]),n("v-uni-view",{staticClass:"earnings-list-price"},[t._v(t._s(t.userInfo.gold)),n("v-uni-text",[t._v("元")])],1),n("v-uni-view",{staticClass:"earnings-list-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$common.to({url:"withdrawal"})}}},[t._v("查看详情"),n("u-icon",{attrs:{name:"arrow-right",size:"22"}})],1)],1),n("v-uni-view",{staticClass:"earnings-list"},[n("v-uni-view",{staticClass:"earnings-list-text"},[t._v("已邀请")]),n("v-uni-view",{staticClass:"earnings-list-price",staticStyle:{color:"#000"}},[t._v(t._s(t.userInfo.total_xjnum.total_num)),n("v-uni-text",[t._v("人")])],1),n("v-uni-view",{staticClass:"earnings-list-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$common.to({url:"myTeam"})}}},[t._v("查看详情"),n("u-icon",{attrs:{name:"arrow-right",size:"22"}})],1)],1)],1):t._e(),n("v-uni-view",{staticClass:"invite-step"},[n("v-uni-image",{attrs:{src:"https://img.50api.cn/vx.tongbayun.v3/invite4.png",mode:"widthFix"}})],1)],1),n("v-uni-view",{staticClass:"btn-ground"},[n("v-uni-view",{staticClass:"btn-ground-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$common.to({url:"withdrawal"})}}},[t._v("立即提现")]),n("v-uni-view",{staticClass:"btn-ground-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sharePoster.apply(void 0,arguments)}}},[t._v("立即邀请")])],1),n("u-popup",{attrs:{mode:"bottom","border-radius":"14"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("v-uni-view",{staticClass:"invite-model"},[n("v-uni-view",{staticClass:"invite-model-content"},[n("v-uni-view",{staticClass:"content-title"},[t._v("分享")]),n("v-uni-view",{staticClass:"content-img"})],1),n("v-uni-view",{staticClass:"invite-model-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show=!1}}},[t._v("取消")])],1)],1),n("u-popup",{attrs:{mode:"center",background:"transparent"},model:{value:t.showPoster,callback:function(e){t.showPoster=e},expression:"showPoster"}},[n("v-uni-view",{staticClass:"poster-box"},[n("v-uni-view",{staticClass:"img-box"},[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:t.posterImage,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"btn-share"},[n("v-uni-view",{staticClass:"button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveImage.apply(void 0,arguments)}}},[t._v("保存海报")]),n("v-uni-view",{staticClass:"button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPoster=!1}}},[t._v("关闭海报")])],1)],1)],1),n("PosterCanvas",{ref:"childCanvas",attrs:{h5LocalPosterCover:t.h5LocalPosterCover,h5Url:t.userInfo.h5_share_url},on:{handleSuccess:function(e){arguments[0]=e=t.$handleEvent(e),t.canvasSuccess.apply(void 0,arguments)}}})],1)},r=[]},"17d5":function(t,e,n){"use strict";n.r(e);var a=n("34d9"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"185d":function(t,e,n){"use strict";function a(t){var e,n,a;return t<128?[t]:t<2048?(e=192+(t>>6),n=128+(63&t),[e,n]):(e=224+(t>>12),n=128+(t>>6&63),a=128+(63&t),[e,n,a])}function i(t,e){this.typeNumber=-1,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=t,this.utf8bytes=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t.charCodeAt(n),r=a(i),o=0;o<r.length;o++)e.push(r[o]);return e}(t),this.make()}n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,n("aa9c"),n("7a76"),n("c9b5"),i.prototype={constructor:i,getModuleCount:function(){return this.moduleCount},make:function(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl:function(t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[e]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,t),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var a=-1;a<=7;a++)e+a<=-1||this.moduleCount<=e+a||(this.modules[t+n][e+a]=0<=n&&n<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=a&&a<=4)},createQrcode:function(){for(var t=0,e=0,n=null,a=0;a<8;a++){this.makeImpl(a);var i=s.getLostPoint(this);(0==a||t>i)&&(t=i,e=a,n=this.modules)}this.modules=n,this.setupTypeInfo(!1,e),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0,null==this.modules[6][t]&&(this.modules[6][t]=t%2==0))},setupPositionAdjustPattern:function(){for(var t=s.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var a=t[e],i=t[n];if(null==this.modules[a][i])for(var r=-2;r<=2;r++)for(var o=-2;o<=2;o++)this.modules[a+r][i+o]=-2==r||2==r||-2==o||2==o||0==r&&0==o}},setupTypeNumber:function(t){for(var e=s.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a,this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(t,e){for(var n=r[this.errorCorrectLevel]<<3|e,a=s.getBCHTypeInfo(n),i=0;i<15;i++){var o=!t&&1==(a>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o;o=!t&&1==(a>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!t},createData:function(){var t=new f,e=this.typeNumber>9?16:8;t.put(4,4),t.put(this.utf8bytes.length,e);for(var n=0,a=this.utf8bytes.length;n<a;n++)t.put(this.utf8bytes[n],8);t.length+4<=8*this.totalDataCount&&t.put(0,4);while(t.length%8!=0)t.putBit(!1);while(1){if(t.length>=8*this.totalDataCount)break;if(t.put(i.PAD0,8),t.length>=8*this.totalDataCount)break;t.put(i.PAD1,8)}return this.createBytes(t)},createBytes:function(t){for(var e=0,n=0,a=0,i=this.rsBlock.length/3,r=new Array,o=0;o<i;o++)for(var u=this.rsBlock[3*o+0],l=this.rsBlock[3*o+1],d=this.rsBlock[3*o+2],f=0;f<u;f++)r.push([d,l]);for(var h=new Array(r.length),v=new Array(r.length),g=0;g<r.length;g++){var p=r[g][0],m=r[g][1]-p;n=Math.max(n,p),a=Math.max(a,m),h[g]=new Array(p);for(o=0;o<h[g].length;o++)h[g][o]=255&t.buffer[o+e];e+=p;var w=s.getErrorCorrectPolynomial(m),b=new c(h[g],w.getLength()-1),x=b.mod(w);v[g]=new Array(w.getLength()-1);for(o=0;o<v[g].length;o++){var y=o+x.getLength()-v[g].length;v[g][o]=y>=0?x.get(y):0}}var k=new Array(this.totalDataCount),C=0;for(o=0;o<n;o++)for(g=0;g<r.length;g++)o<h[g].length&&(k[C++]=h[g][o]);for(o=0;o<a;o++)for(g=0;g<r.length;g++)o<v[g].length&&(k[C++]=v[g][o]);return k},mapData:function(t,e){for(var n=-1,a=this.moduleCount-1,i=7,r=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var u=0;u<2;u++)if(null==this.modules[a][o-u]){var l=!1;r<t.length&&(l=1==(t[r]>>>i&1));var c=s.getMask(e,a,o-u);c&&(l=!l),this.modules[a][o-u]=l,i--,-1==i&&(r++,i=7)}if(a+=n,a<0||this.moduleCount<=a){a-=n,n=-n;break}}}}},i.PAD0=236,i.PAD1=17;for(var r=[1,0,3,2],o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(s.getBCHDigit(e)-s.getBCHDigit(s.G15)>=0)e^=s.G15<<s.getBCHDigit(e)-s.getBCHDigit(s.G15);return(t<<10|e)^s.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(s.getBCHDigit(e)-s.getBCHDigit(s.G18)>=0)e^=s.G18<<s.getBCHDigit(e)-s.getBCHDigit(s.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return s.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case o.PATTERN000:return(e+n)%2==0;case o.PATTERN001:return e%2==0;case o.PATTERN010:return n%3==0;case o.PATTERN011:return(e+n)%3==0;case o.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case o.PATTERN101:return e*n%2+e*n%3==0;case o.PATTERN110:return(e*n%2+e*n%3)%2==0;case o.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new c([1],0),n=0;n<t;n++)e=e.multiply(new c([1,u.gexp(n)],0));return e},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,a=0,i=0;i<e;i++)for(var r=0,o=t.modules[i][0],s=0;s<e;s++){var u=t.modules[i][s];if(s<e-6&&u&&!t.modules[i][s+1]&&t.modules[i][s+2]&&t.modules[i][s+3]&&t.modules[i][s+4]&&!t.modules[i][s+5]&&t.modules[i][s+6]&&(s<e-10?t.modules[i][s+7]&&t.modules[i][s+8]&&t.modules[i][s+9]&&t.modules[i][s+10]&&(n+=40):s>3&&t.modules[i][s-1]&&t.modules[i][s-2]&&t.modules[i][s-3]&&t.modules[i][s-4]&&(n+=40)),i<e-1&&s<e-1){var l=0;u&&l++,t.modules[i+1][s]&&l++,t.modules[i][s+1]&&l++,t.modules[i+1][s+1]&&l++,0!=l&&4!=l||(n+=3)}o^u?r++:(o=u,r>=5&&(n+=3+r-5),r=1),u&&a++}for(s=0;s<e;s++)for(r=0,o=t.modules[0][s],i=0;i<e;i++){u=t.modules[i][s];i<e-6&&u&&!t.modules[i+1][s]&&t.modules[i+2][s]&&t.modules[i+3][s]&&t.modules[i+4][s]&&!t.modules[i+5][s]&&t.modules[i+6][s]&&(i<e-10?t.modules[i+7][s]&&t.modules[i+8][s]&&t.modules[i+9][s]&&t.modules[i+10][s]&&(n+=40):i>3&&t.modules[i-1][s]&&t.modules[i-2][s]&&t.modules[i-3][s]&&t.modules[i-4][s]&&(n+=40)),o^u?r++:(o=u,r>=5&&(n+=3+r-5),r=1)}var c=Math.abs(100*a/e/e-50)/5;return n+=10*c,n}},u={glog:function(t){if(t<1)throw new Error("glog("+t+")");return u.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return u.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)u.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)u.EXP_TABLE[l]=u.EXP_TABLE[l-4]^u.EXP_TABLE[l-5]^u.EXP_TABLE[l-6]^u.EXP_TABLE[l-8];for(l=0;l<255;l++)u.LOG_TABLE[u.EXP_TABLE[l]]=l;function c(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var a=0;a<t.length-n;a++)this.num[a]=t[a+n]}c.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<t.getLength();a++)e[n+a]^=u.gexp(u.glog(this.get(n))+u.glog(t.get(a)));return new c(e,0)},mod:function(t){var e=this.getLength(),n=t.getLength();if(e-n<0)return this;for(var a=new Array(e),i=0;i<e;i++)a[i]=this.get(i);while(a.length>=n){var r=u.glog(a[0])-u.glog(t.get(0));for(i=0;i<t.getLength();i++)a[i]^=u.gexp(u.glog(t.get(i))+r);while(0==a[0])a.shift()}return new c(a,0)}};var d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];function f(){this.buffer=new Array,this.length=0}i.prototype.getRightType=function(){for(var t=1;t<41;t++){var e=d[4*(t-1)+this.errorCorrectLevel];if(void 0==e)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+this.errorCorrectLevel);for(var n=e.length/3,a=0,i=0;i<n;i++){var r=e[3*i+0],o=e[3*i+2];a+=o*r}var s=t>9?2:1;if(this.utf8bytes.length+s<a||40==t){this.typeNumber=t,this.rsBlock=e,this.totalDataCount=a;break}}},f.prototype={get:function(t){var e=Math.floor(t/8);return this.buffer[e]>>>7-t%8&1},put:function(t,e){for(var n=0;n<e;n++)this.putBit(t>>>e-n-1&1)},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}},"1dbd":function(t,e,n){"use strict";var a=n("ac5f"),i=n("1fc1"),r=n("41c7"),o=n("ae5c"),s=function(t,e,n,u,l,c,d,f){var h,v,g=l,p=0,m=!!d&&o(d,f);while(p<u)p in n&&(h=m?m(n[p],p,e):n[p],c>0&&a(h)?(v=i(h),g=s(t,e,h,v,g,c-1)-1):(r(g+1),t[g]=h),g++),p++;return g};t.exports=s},"1e19":function(t,e,n){"use strict";n.r(e);var a=n("ae02"),i=n("c92e");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("bb30");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"1d7f90d0",null,!1,a["a"],void 0);e["default"]=s.exports},"26dd":function(t,e,n){"use strict";n.r(e);var a=n("c4f4"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},3471:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,a.default)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(u)throw o}}}},n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("7a76"),n("c9b5");var a=function(t){return t&&t.__esModule?t:{default:t}}(n("5d6b"))},"34d9":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("aa77"),n("bf0f");var i=a(n("2634")),r=a(n("2fdc")),o=a(n("6af2")),s={props:{shareUrl:String,localPosterCover:String,h5LocalPosterCover:String,h5Url:String,invite_code:String},data:function(){return{canvasStyle:{width:"750rpx",height:"500rpx"},showPoster:!1,posterImage:"",canvasId:"autoHeight",qrCode:"",qrCodeFetched:!1}},mounted:function(){this.createDraw()},methods:{fetchQrCode:function(t){var e=this;return(0,r.default)((0,i.default)().mark((function n(){return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.qrCodeFetched){n.next=2;break}return n.abrupt("return");case 2:e.qrCodeFetched=!0,""==e.qrCode&&e.req({url:"/v1/share/getMiniQrcode",data:{invite_code:t},success:function(t){200==t.code&&(e.qrCode=t.data)}});case 4:case"end":return n.stop()}}),n)})))()},createDraw:function(){var t=this;if(!this.draw){var e=new o.default({width:750,height:600,canvasId:this.canvasId,_this:this,unit:"rpx",type:"default",fontStyle:{size:32},background:{type:"color",color:"#ffffff",w:750,h:99999},drawDelayTime:200,exportImageDelayTime:400});this.draw=e,e.$on("init",(0,r.default)((0,i.default)().mark((function n(){return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.drawBackground();case 2:return n.next=4,t.drawPoster();case 4:case"end":return n.stop()}}),n)})))),e.$on("drawComplete",function(){var n=(0,r.default)((0,i.default)().mark((function n(a){var r,o;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=a.width,o=a.contentHeight,t.canvasStyle.width=r+e.unit,t.canvasStyle.height=o+48+e.unit,n.next=5,e.setCanvasStyle(r,o+48);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}},drawPoster:function(){var t=this;return(0,r.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.posterImage){e.next=4;break}return t.$emit("handleSuccess",{showPoster:!0,posterImage:t.posterImage}),t.showPoster=!0,e.abrupt("return");case 4:return console.log(t.draw),e.next=7,t.draw.drawPoster((function(e){var n=e.ctxObj,a=(e.bgObj,n.width),i=(n.height,{name:"image",type:"image",w:a,mode:"widthFix",drawType:"rect",src:function(){return t.h5LocalPosterCover}()}),r={name:"qcCode",type:"qrcode",text:t.h5Url,size:200,image:{src:"/pagesA/static/head.jpg",size:100,r:10,borderWidth:14,borderColor:"#ffffff"},callback:function(t,e){var n=e.find((function(t){return"image"===t.name})),i=(n.sx,n.ex),r=e.find((function(t){return"image"===t.name})),o=r.ey;return{w:a/3,x:i-250,y:o+50}}};return[i,{font:{size:34},line:{height:42,num:2},textIndent:40,name:"title",type:"text",text:"心动开盲盒",color:"#000",callback:function(t){return{y:t.ey+108}}},{font:{size:34},line:{height:42,num:2},textIndent:40,name:"subtitle",type:"text",text:" 美好不重样！",color:"#2c2c2c",callback:function(t){return{y:t.ey+20}}},r]}));case 7:if(n=e.sent,n.success){e.next=10;break}return e.abrupt("return");case 10:t.$emit("handleSuccess",{showPoster:!0,posterImage:n.data}),t.showPoster=!0,t.posterImage=n.data;case 13:case"end":return e.stop()}}),e)})))()}}};e.default=s},"3f2c":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.canvas[data-v-43dc92be]{position:fixed;left:%?-999999?%;top:%?-999999?%}.poster-box[data-v-43dc92be]{width:%?750?%;height:%?500?%;background-color:red}.poster_tool[data-v-43dc92be]{position:absolute;left:0;bottom:0;z-index:99999999999;width:100vw;height:%?210?%;border-top-left-radius:%?30?%;border-top-right-radius:%?30?%;background-color:#fff;display:flex;justify-content:space-around;align-items:center;padding-bottom:env(safe-area-inset-bottom)}.poster_tool .poster_tool_item[data-v-43dc92be]{width:%?150?%;height:%?150?%;background-color:hsla(0,0%,90.2%,.3215686274509804);border-radius:%?15?%;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:%?23?%;color:hsla(0,0%,40%,.7215686274509804)}.poster_tool .poster_tool_item uni-button[data-v-43dc92be]{width:%?150?%;height:%?150?%;background-color:hsla(0,0%,96.1%,.3215686274509804);border-radius:%?15?%;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:%?23?%;color:hsla(0,0%,40%,.7215686274509804);padding:0}.poster_tool .poster_tool_item uni-button[data-v-43dc92be]::after{border:none;outline:none}.poster_tool .poster_tool_item[data-v-43dc92be]:hover{background-color:hsla(0,0%,87.5%,.3215686274509804)}',""]),t.exports=e},"4e37":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.u-navbar[data-v-1d7f90d0]{width:100%}.u-navbar-fixed[data-v-1d7f90d0]{position:fixed;left:0;right:0;top:0;z-index:991}.u-status-bar[data-v-1d7f90d0]{width:100%}.u-navbar-inner[data-v-1d7f90d0]{display:flex;flex-direction:row;justify-content:space-between;position:relative;align-items:center}.u-back-wrap[data-v-1d7f90d0]{display:flex;flex-direction:row;align-items:center;flex:1;flex-grow:0;padding:%?14?% %?14?% %?14?% %?24?%}.u-back-text[data-v-1d7f90d0]{padding-left:%?4?%;font-size:%?30?%}.u-navbar-content-title[data-v-1d7f90d0]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex:1;position:absolute;left:0;right:0;height:%?60?%;text-align:center;flex-shrink:0}.u-navbar-centent-slot[data-v-1d7f90d0]{flex:1}.u-title[data-v-1d7f90d0]{line-height:%?60?%;font-size:%?32?%;flex:1}.u-navbar-right[data-v-1d7f90d0]{flex:1;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.u-slot-content[data-v-1d7f90d0]{flex:1;display:flex;flex-direction:row;align-items:center}',""]),t.exports=e},"526d":function(t,e,n){"use strict";n.r(e);var a=n("07b1"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"590c":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("1851");var i=a(n("3471")),r=a(n("9b1b")),o=a(n("80b1")),s=a(n("efe5")),u=function(){function t(e){(0,o.default)(this,t),Object.assign(this,e)}return(0,s.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t),a=t.coordinate,i=void 0===a?[]:a,o=t.drawType,s=void 0===o?"isosceles":o,u=t.direction,l=void 0===u?"top":u,c=(0,r.default)((0,r.default)({},n),{},{coordinate:i,drawType:s,direction:l});return e?this.commonUtilMethods.conversionUnit(c):c}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.Context,a=this.commonUtilMethods,r=this.commonDrawMethods,o=a.canvasWidth,s=(a.is2d,this.getDrawParams(t,e)),u=s.x,l=s.y,c=s.w,d=s.h,f=s.color,h=s.alpha,v=s.isFill,g=s.lineWidth,p=s.drawType,m=s.offsetRight,w=s.coordinate,b=s.rotate,x=s.windowAlign,y=s.direction,k=s.borderWidth,C=s.borderColor,T=s.drawImage;if("black"===f&&T?f="none":"black"===f&&(f="#ffffff"),"none"!==x&&"custom"!=p&&(u=r.computedCenterX(o,c,x,m)),b.deg&&"custom"!==p&&(n.save(),r.setTriangleRotate(u,l,c,d,b,p)),n.beginPath(),r.setAlpha(h),"isosceles"===p)switch(y){case"top":n.lineTo(u+c/2,l),n.lineTo(u,l+d),n.lineTo(u+c,l+d);break;case"bottom":n.lineTo(u,l),n.lineTo(u+c,l),n.lineTo(u+c/2,l+d);break;case"right":n.lineTo(u,l),n.lineTo(u,l+d),n.lineTo(u+c,l+d/2);break;case"left":n.lineTo(u+c,l),n.lineTo(u+c,l+d),n.lineTo(u,l+d/2);break}else if("right"===p)switch(y){case"top":n.lineTo(u,l),n.lineTo(u,l+d),n.lineTo(u+c,l+d);break;case"bottom":n.lineTo(u,l),n.lineTo(u+c,l),n.lineTo(u,l+d);break;case"left":n.lineTo(u,l),n.lineTo(u,l+d),n.lineTo(u+c,l);break;case"right":n.lineTo(u,l+d),n.lineTo(u+c,l+d),n.lineTo(u+c,l);break}else if("custom"===p){var P,I=(0,i.default)(w);try{for(I.s();!(P=I.n()).done;){var _=P.value;n.lineTo(_[0],_[1])}}catch(S){I.e(S)}finally{I.f()}}n.closePath(),v?(0!==k&&(r.setLineWidth(k),r.setStrokeStyle(C),n.stroke()),(!T||T&&"none"!==f)&&(r.setFillStyle(f),n.fill())):(r.setLineWidth(g),r.setStrokeStyle(f),n.stroke()),r.setAlpha(1),b.deg&&"custom"!==p&&n.restore()}}]),t}();e.default=u},5965:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getImageInfo=e.default=void 0,e.getImageSrc=p,e.getModeImage=void 0,n("bf0f"),n("5c47"),n("0506"),n("64aa"),n("4626"),n("5ac7");var i=a(n("2634")),r=a(n("2fdc")),o=a(n("a823")),s=a(n("9b1b")),u=a(n("80b1")),l=a(n("efe5")),c=n("abe5"),d=["w","src","windowAlign","drawModeImage","offsetRight","x"],f=function(){function t(e){(0,u.default)(this,t),Object.assign(this,e)}return(0,l.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t),a=t.src,i=void 0===a?"":a,r=t.mode,o=void 0===r?"aspectFill":r,u=t.triangle,l=void 0===u?{}:u,c=t.isCompressImage,d=void 0!==c&&c,f=t.quality,h=void 0===f?100:f,v=t.drawSrc,g=void 0!==v&&v,p=t.drawModeImage,m=void 0!==p&&p,w=t.drawImageInfo,b=void 0!==w&&w,x=(0,s.default)((0,s.default)({},n),{},{src:i,mode:o,drawType:t.drawType||"default",triangle:l,isCompressImage:d,quality:h,drawSrc:g,drawModeImage:m,drawImageInfo:b,drawImage:!0});return e?this.commonUtilMethods.conversionUnit(x):x}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(this.Context,this.commonUtilMethods),u=this.commonDrawMethods,l=a.canvasWidth,c=a.is2d,f=this.getDrawParams(e,n),h=f.w,v=f.src,m=f.windowAlign,w=f.drawModeImage,b=f.offsetRight,x=f.x,y=(0,o.default)(f,d);return new Promise(function(){var e=(0,r.default)((0,i.default)().mark((function e(n){var a,o,d,f;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,/\S/.test(v)){e.next=3;break}return e.abrupt("return",n({success:!1,message:"图片路径为空"}));case 3:if(c){e.next=10;break}return e.next=6,p(v);case 6:if(a=e.sent,a.success){e.next=9;break}return e.abrupt("return",n(a));case 9:v=a.src;case 10:if("none"!==m&&(x=u.computedCenterX(l,h,m,b)),o=w,o){e.next=18;break}return e.next=15,g(v);case 15:if(o=e.sent,o.success){e.next=18;break}return e.abrupt("return",n(o));case 18:if(d=t.getImage(v),f=(0,s.default)((0,s.default)({},y),{},{x:x,imageInfo:o,img:d,w:h,src:v,windowAlign:m,drawModeImage:w,offsetRight:b}),!c){e.next=24;break}d.onload=(0,r.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t.drawImageByType(f);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),e.next=29;break;case 24:return e.t0=n,e.next=27,t.drawImageByType(f);case 27:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 29:e.next=34;break;case 31:return e.prev=31,e.t2=e["catch"](0),e.abrupt("return",n({success:!1,msg:"绘制图片出错"+e.t2}));case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"drawImageByType",value:function(t){var e=this,n=t.imageInfo,a=t.r,o=t.x,s=t.y,u=t.w,l=t.h,c=t.rotate,d=t.borderWidth,f=t.borderColor,v=t.color,g=t.alpha,p=t.borderType,m=t.triangle,w=t.mode,b=t.drawType,x=t.img,y=t.shadow,k=(t.drawSrc,t.drawModeImage),C=this.Context,T=this.commonDrawMethods,P=this.commonUtilMethods,I=P.unit,_=P.pxToRpx;return new Promise(function(){var t=(0,r.default)((0,i.default)().mark((function t(P){var S,M,A,D,L,E,R,z,B,U,F,O,j,W;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0===l&&(l=u),S=k,S||(S=h(Number(n.width),Number(n.height),o,s,u,l,w)),M=S,A=M.dx,D=M.dy,L=M.dw,E=M.dh,R=M.sw,z=M.sh,B=M.sx,U=M.sy,C.save(),C.beginPath(),"triangle"!==b&&T.setRotate(o,s,u,l,c),F=function(){var t=(0,r.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return C.clip(),T.setAlpha(g),t.next=4,e.drawImageContent(w,b,x,A,D,L,E,B,U,R,z);case 4:C.restore();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),"default"!=b){t.next=16;break}return T.setAlpha(g),t.next=12,e.drawImageContent(w,b,x,A,D,L,E,B,U,R,z,o,s,u,l);case 12:C.clip(),C.restore(),t.next=37;break;case 16:if("arc"!==b){t.next=22;break}return T.drawParams.drawArc.draw({x:o,y:s,r:u/2,borderWidth:d,borderColor:f,color:v,drawImage:!0,shadow:y},!1),t.next=20,F();case 20:t.next=37;break;case 22:if("rect"!==b){t.next=29;break}return"widthFix"===w?l=z:"heightFix"===w&&(u=R),T.drawParams.drawRect.draw({x:o,y:s,w:u,h:l,alpha:g,borderWidth:d,borderColor:f,borderType:p,r:a,color:v,drawImage:!0,shadow:y},!1),t.next=27,F();case 27:t.next=37;break;case 29:if("triangle"!==b){t.next=37;break}return O=m.type||"isosceles",j=m.coordinate||[],W=m.direction||"top","custom"!==O&&T.setTriangleRotate(o,s,u,l,c,O),T.drawParams.drawTriangle.draw({x:o,y:s,w:u,h:l,alpha:g,borderWidth:d,borderColor:f,color:v,coordinate:j,direction:W,drawType:O,drawImage:!0},!1),t.next=37,F();case 37:return T.setAlpha(1),t.abrupt("return",P({success:!0,w:"rpx"===I?_(u):u,h:"rpx"===I?_(l):l}));case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"drawImageContent",value:function(t,e,n,a,o,s,u,l,c,d,f,h,v,g,p){var m=this.Context;return new Promise(function(){var w=(0,r.default)((0,i.default)().mark((function r(w){return(0,i.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("default"!==e){i.next=5;break}return i.next=3,m.drawImage(n,h,v,g,p);case 3:i.next=12;break;case 5:if("default"===t){i.next=10;break}return i.next=8,m.drawImage(n,a,o,s,u,l,c,d,f);case 8:i.next=12;break;case 10:return i.next=12,m.drawImage(n,a,o,s,u);case 12:w(!0);case 13:case"end":return i.stop()}}),r)})));return function(t){return w.apply(this,arguments)}}())}},{key:"getImage",value:function(t){var e=this.commonUtilMethods,n=e.is2d,a=e.canvas;if(n){var i=a.createImage();return i.src=t,i}return t}}]),t}();e.default=f;var h=function(t,e,n,a,i,r,o){return"aspectFit"===o?function(t,e,n,a,i,r){var o=e/t,s=i,u=o*s;o>=1&&(o=t/e,u=r,s=o*u);return{sw:s,sh:u,sx:n+(i-s)/2,sy:a+(r-u)/2,dw:t,dh:e,dx:0,dy:0}}(t,e,n,a,i,r):"aspectFill"===o?v(t,e,n,a,i,r):"widthFix"===o?function(t,e,n,a,i,r){var o=e/t,s=i,u=s*o;return{sw:s,sh:u,sx:n,sy:a,dw:t,dh:e,dx:0,dy:0}}(t,e,n,a,i):"heightFix"===o?function(t,e,n,a,i,r){var o=t/e,s=r,u=s*o;return{sw:u,sh:s,sx:n,sy:a,dw:t,dh:e,dx:0,dy:0}}(t,e,n,a,0,r):"default"===o?{dw:i,dh:r,dx:n,dy:a}:v(t,e,n,a,i,r)};function v(t,e,n,a,i,r){var o=e/t,s=i,u=o*s,l=0,c=(e-r*(e/u))/2;return o<1&&(o=t/e,u=r,s=o*u,c=0,l=(t-i*(t/s))/2),{sw:s,sh:u,sx:n,sy:a,dw:t,dh:e,dx:l,dy:c}}e.getModeImage=h;var g=function(t){return new Promise((function(e){uni.getImageInfo({src:t,success:function(t){e((0,s.default)({success:!0},t))},fail:function(t){e({success:!1,msg:t})}})}))};function p(t){return new Promise(function(){var e=(0,r.default)((0,i.default)().mark((function e(n){var a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,c.base64ToPathFn)(t);case 2:if(t=e.sent,!t.includes("http")||t.includes("resource")){e.next=10;break}return e.next=6,(0,c.downloadFile)(t);case 6:if(a=e.sent,a.success){e.next=9;break}return e.abrupt("return",n({success:!1,msg:"图片路径为:".concat(t,"的文件下载失败")}));case 9:t=a.data.tempFilePath;case 10:return e.abrupt("return",n({success:!0,src:t}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}e.getImageInfo=g},"5d1a":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",[e("v-uni-canvas",{staticClass:"canvas",style:[this.canvasStyle],attrs:{id:this.canvasId,"canvas-id":this.canvasId}})],1)},i=[]},"6af2":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default,i=n("3639").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("3471")),o=a(n("a823"));n("c1a3"),n("bf0f"),n("18f7"),n("de6c"),n("5c47"),n("f3f7"),n("2797"),n("64aa"),n("aa9c"),n("473f");var s=a(n("2634")),u=a(n("2fdc")),l=a(n("9b1b")),c=a(n("80b1")),d=a(n("efe5")),f=a(n("9cd2")),h=a(n("7704")),v=a(n("806e")),g=a(n("8280")),p=i(n("5965")),m=a(n("590c")),w=a(n("9209")),b=a(n("fc94")),x=n("ccb2"),y=["type"],k=["callback"],C=function(){function t(e){(0,c.default)(this,t);var n=e.width,a=void 0===n?375.0001:n,i=e.height,r=void 0===i?0:i,o=e.canvasId,s=void 0===o?null:o,u=e._this,d=void 0===u?null:u,f=e.background,h=void 0===f?{}:f,v=e.type,g=void 0===v?"default":v,p=e.unit,m=void 0===p?"px":p,w=e.drawDelayTime,b=void 0===w?200:w,y=e.exportImageDelayTime,k=void 0===y?200:y,C=e.showDrawTips,T=void 0===C||C,P=e.drawTipsText,I=void 0===P?"绘制中...":P,_=e.showExportImagesTips,S=void 0===_||_,M=e.exportImageTips,A=void 0===M?"导出图片中...":M,D=e.fontStyle,L=void 0===D?{}:D,E=e.exportImageStyle,R=void 0===E?{}:E;this.background=(0,l.default)({type:"color",w:a,h:r,color:"#ffffff"},h),this.canvasId=s,this._this=d,this.type=g,this.type="default",this.is2d="2d"===this.type,this.unit=m,this.drawDelayTime=b,this.exportImageDelayTime=k,this.showDrawTips=T,this.drawTipsText=I,this.showExportImagesTips=S,this.exportImageTips=A,this.fontStyle=(0,l.default)({size:"default"===this.type?16:32,family:"sans-serif",style:"normal",variant:"normal",weight:"normal"},L),this.commonUtilMethods=new x.CommonUtilMethods({unit:m,type:this.type,width:a,height:r,fontStyle:this.fontStyle}),this.setCanvasStyle(a,r),this.exportImageStyle=(0,l.default)({width:a,height:r,x:0,y:0,fileType:"png",quality:1},R),this.allCallback=[],this.$eventsMap=new Map,this.createContext(),this.drawCallback=null}return(0,d.default)(t,[{key:"createContext",value:function(){var t=(0,u.default)((0,s.default)().mark((function t(){var e,n,a,i,r,o,u,l,c,d=this;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.width,n=this.height,a=this.canvasId,i=this._this,r=this.type,o=this.is2d,u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d.Context=t,d.canvas=e,d.commonDrawMethods=new x.CommonDrawMethods(t,r,d.commonUtilMethods),d.commonUtilMethods.Context=t,d.commonUtilMethods.canvas=e,d.initDrawMethods(),d.$emit("init")},l=uni.getSystemInfoSync().pixelRatio,this.dpr=l,o){t.next=11;break}return c=uni.createCanvasContext(a,i),t.next=8,(0,x.sleep)(50);case 8:u(c),t.next=12;break;case 11:uni.createSelectorQuery().select("#".concat(a)).fields({node:!0,size:!0}).exec((function(t){var a=t[0].node,i=a.getContext(r);a.width=d.commonUtilMethods.getConvertedValue(e)*l,a.height=d.commonUtilMethods.getConvertedValue(n)*l,i.scale(l,l),u(i,a)}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initDrawMethods",value:function(){var t=this.Context,e=this.commonUtilMethods,n=this.commonDrawMethods,a={Context:t,commonUtilMethods:e,commonDrawMethods:n};this.canvasMethods=new b.default(this);var i=new f.default(a),r=new h.default(a),o=new v.default(a),s=new g.default(a),u=new p.default(a),l=new m.default(a),c=new w.default(a);this.commonDrawMethods.drawParams={drawText:i,drawLine:r,drawRect:o,drawArc:s,drawImage:u,drawTriangle:l,drawQrcode:c},this.drawText=i,this.drawLine=r,this.drawRect=o,this.drawArc=s,this.drawImage=u,this.drawTriangle=l,this.drawQrcode=c}},{key:"setExportImageStyle",value:function(t){this.exportImageStyle=(0,l.default)((0,l.default)({},this.exportImageStyle),t)}},{key:"setBackgroundStyle",value:function(t){this.background=(0,l.default)((0,l.default)({},this.background),t)}},{key:"setCanvasStyle",value:function(){var t=(0,u.default)((0,s.default)().mark((function t(e,n){var a,i,r,o;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.width=e,this.height=n,this.commonUtilMethods.width=e,this.commonUtilMethods.height=n,this.commonUtilMethods.setCanvasStyle(),this.callbackInfo={bgObj:{width:this.background.w,height:this.background.h},ctxObj:{width:e,height:n}},this.setExportImageStyle({width:e,height:n}),!this.canvas){t.next=17;break}return a=this.dpr,i=this.canvas,r=this.Context,o=this.commonUtilMethods,i.width=o.getConvertedValue(e)*a,i.height=o.getConvertedValue(n)*a,r.scale(a,a),t.next=14,this.drawBackground(!1);case 14:if(!this.drawArrayFn){t.next=17;break}return t.next=17,this.drawCanvas(this.drawArrayFn(this.callbackInfo),!1);case 17:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"$on",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&e&&"function"===typeof e){var n=this.$eventsMap.get(t);n||this.$eventsMap.set(t,n=new Set),n.add(e)}}},{key:"$emit",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];if(e){var r=this.$eventsMap.get(e);r&&r.forEach((function(e){e.apply(t,a)}))}}},{key:"drawBackground",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.background,a=this.width,i=this.height,r=(this.Context,this.drawRect),c=this.drawImage,d=this.unit;this.commonUtilMethods;return new Promise(function(){var f=(0,u.default)((0,s.default)().mark((function u(f){var h,v,g,p,m,w,b,x;return(0,s.default)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(h=n.type,v=(0,o.default)(n,y),e||t.canvasMethods.clearCanvas(),g={},"color"!==h){s.next=7;break}g=r.draw((0,l.default)((0,l.default)({},v),{},{w:null!==(p=v.w)&&void 0!==p?p:a,h:null!==(m=v.h)&&void 0!==m?m:i,color:null!==(w=v.color)&&void 0!==w?w:"#ffffff"})),s.next=11;break;case 7:if("image"!==h){s.next=11;break}return s.next=10,c.draw((0,l.default)((0,l.default)({},v),{},{w:null!==(b=v.w)&&void 0!==b?b:a,h:null!==(x=v.h)&&void 0!==x?x:i}));case 10:g=s.sent;case 11:g.style={width:g.w+d,height:g.h+d},t.background.w=g.w,t.background.h=g.h,e&&t.$emit("background",g),f(g);case 16:case"end":return s.stop()}}),u)})));return function(t){return f.apply(this,arguments)}}())}},{key:"setAllCallBack",value:function(){var t=(0,u.default)((0,s.default)().mark((function t(e){var n,a,i,r,o,u,l,c,d,f,h,v,g,m,w,b,x,y,k,C,T,P,I,_,S,M,A,D,L,E,R,z,B,U,F,O,j,W,N,$,H,G,q,X,V,Q,J,K,Y,Z,tt,et,nt;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.width,a=this.commonUtilMethods,i=this.commonDrawMethods,r=a.canvasWidth,o=e.type,u=e.x,l=void 0===u?0:u,c=e.y,d=void 0===c?0:c,f=e.r,h=void 0===f?0:f,v=e.w,g=void 0===v?r:v,m=e.h,w=void 0===m?0:m,b=e.lineWidth,x=void 0===b?1:b,y=e.size,k=void 0===y?0:y,C=e.name,T=void 0===C?"":C,P=e.windowAlign,I=void 0===P?"none":P,_=e.drawType,S=void 0===_?"default":_,M=e.mode,A=void 0===M?"aspectFill":M,D=e.src,L=void 0===D?"":D,E=e.offsetRight,R=void 0===E?0:E,z=l,B=d,U=l+g,F=d+w,"text"!==o){t.next=19;break}O=this.drawText.getDrawParams(e,!1),j=O.text,W=O.textIndent,N=O.lastWidth,$=O.font,H=O.line,G=O.textAlign,q=O.windowAlign,X=O.color,V=O.highlightText,Q=i.computedFontTextLineHeight({x:l,y:d,w:g,text:j,textIndent:W,lastWidth:N,font:$,line:H,textAlign:G,windowAlign:q,defaultColor:X,offsetRight:R,highlightText:V}),J=Q[Q.length-1],K=Q[0],F=J.ey,U=K.tx+K.w,e.textArr=a.conversionUnit(Q),e.h=F-B,e.tw=K.w,t.next=58;break;case 19:if("arc"!==o){t.next=26;break}U=l+2*h,F=d+2*h,g=2*h,w=2*h,t.next=58;break;case 26:if("line"!==o){t.next=31;break}F=d+x,w=x,t.next=58;break;case 31:if("qrcode"!==o){t.next=38;break}U=l+k,F=d+k,g=k,w=k,t.next=58;break;case 38:if("image"!==o){t.next=58;break}return"none"!==I&&(l=i.computedCenterX(n,g,I,R)),t.next=42,(0,p.getImageSrc)(L);case 42:if(Y=t.sent,Y.success){t.next=45;break}return t.abrupt("return",Y);case 45:return L=Y.src,t.next=48,(0,p.getImageInfo)(L);case 48:if(Z=t.sent,Z.success){t.next=51;break}return t.abrupt("return",Promise.resolve(!0));case 51:tt=(0,p.getModeImage)(Number(Z.width),Number(Z.height),a.getConvertedValue(l),a.getConvertedValue(d),a.getConvertedValue(g),a.getConvertedValue(w),A),tt.dx,tt.dy,tt.dw,tt.dh,et=tt.sw,nt=tt.sh,tt.sx,tt.sy,"widthFix"===A?(w="rpx"===this.unit?a.pxToRpx(nt):nt,F=d+w):"heightFix"===A&&(g="rpx"===this.unit?a.pxToRpx(et):et,U=l+g),"arc"===S&&0==w&&(w=g,F=d+w),e.drawModeImage=tt,e.drawSrc=L,e.drawImageInfo=Z;case 58:return e.sx=z,e.sy=B,e.ex=U,e.ey=F,this.allCallback.push({sx:z,sy:B,ex:U,ey:F,w:g,h:w,name:T,before:e.before||{}}),t.abrupt("return",Promise.resolve(!0));case 64:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"drawCanvas",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.Context,i=this.showDrawTips,c=this.showExportImagesTips;return new Promise(function(){var d=(0,u.default)((0,s.default)().mark((function u(d){var f,h,v,g,p,m,w,b,x,y,C,T;return(0,s.default)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:s.prev=0,f=(0,r.default)(t),s.prev=2,f.s();case 4:if((h=f.n()).done){s.next=36;break}if(v=h.value,v.callback&&"function"===typeof v.callback&&"custom"!==v.type&&(g=0==e.allCallback.length?{}:e.allCallback[e.allCallback.length-1],p=v.callback(g,e.allCallback)||{},m=v,m.callback,w=(0,o.default)(m,k),v=(0,l.default)((0,l.default)({},w),p)),"custom"===v.type||"custom"===v.drawType){s.next=10;break}return s.next=10,e.setAllCallBack(v);case 10:s.t0=v.type,s.next="text"===s.t0?13:"rect"===s.t0?15:"image"===s.t0?17:"arc"===s.t0?23:"triangle"===s.t0?25:"line"===s.t0?27:"qrcode"===s.t0?29:"custom"===s.t0?32:34;break;case 13:return e.drawText.draw(v),s.abrupt("break",34);case 15:return e.drawRect.draw(v),s.abrupt("break",34);case 17:return s.next=19,e.drawImage.draw(v);case 19:if(b=s.sent,b.success){s.next=22;break}return s.abrupt("return",d(b));case 22:return s.abrupt("break",34);case 23:return e.drawArc.draw(v),s.abrupt("break",34);case 25:return e.drawTriangle.draw(v),s.abrupt("break",34);case 27:return e.drawLine.draw(v),s.abrupt("break",34);case 29:return s.next=31,e.drawQrcode.draw(v);case 31:return s.abrupt("break",34);case 32:return v.setDraw(a,e),s.abrupt("break",34);case 34:s.next=4;break;case 36:s.next=41;break;case 38:s.prev=38,s.t1=s["catch"](2),f.e(s.t1);case 41:return s.prev=41,f.f(),s.finish(41);case 44:if(d({success:!0}),n){s.next=47;break}return s.abrupt("return");case 47:x=e.width,y=e.height,C=e.allCallback.reduce((function(t,e){return Math.max(t,e.ey)}),0),T=e.allCallback.reduce((function(t,e){return Math.max(t,e.ex)}),0),e.$emit("drawComplete",{width:x,height:y,contentHeight:C,contentWidth:T}),s.next=56;break;case 53:return s.prev=53,s.t2=s["catch"](0),s.abrupt("return",d({success:!1,msg:"绘制内容失败:"+s.t2}));case 56:return s.prev=56,(i||c)&&uni.hideLoading(),s.finish(56);case 59:case"end":return s.stop()}}),u,null,[[0,53,56,59],[2,38,41,44]])})));return function(t){return d.apply(this,arguments)}}())}},{key:"drawPoster",value:function(t){var e=this,n=this.callbackInfo,a=this.showDrawTips,i=this.drawTipsText,r=this.showExportImagesTips;return new Promise(function(){var o=(0,u.default)((0,s.default)().mark((function o(u){var l;return(0,s.default)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t&&"function"===typeof t){o.next=2;break}return o.abrupt("return",u({success:!1,msg:"drawPoster参数错误"}));case 2:if(!e.drawArrayFn){o.next=7;break}return e.allCallback=[],e.canvasMethods.clearCanvas(),o.next=7,e.drawBackground(!1);case 7:return e.drawArrayFn=t,a&&uni.showLoading({title:i}),o.next=11,e.drawCanvas(t(n));case 11:if(l=o.sent,l.success){o.next=14;break}return o.abrupt("return",u(l));case 14:return o.t0=u,o.next=17,e.canvasMethods.canvasDraw();case 17:o.t1=o.sent,(0,o.t0)(o.t1),(a||r)&&uni.hideLoading();case 20:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}())}}]),t}();e.default=C},"6da4":function(t,e,n){"use strict";n.r(e);var a=n("5d1a"),i=n("17d5");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("a832");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"43dc92be",null,!1,a["a"],void 0);e["default"]=s.exports},"71cb":function(t,e,n){"use strict";var a=n("8bdb"),i=n("1dbd"),r=n("1099"),o=n("1fc1"),s=n("497b"),u=n("3242");a({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=r(this),n=o(e),a=u(e,0);return a.length=i(a,e,e,n,0,void 0===t?1:s(t)),a}})},7704:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("9b1b")),r=a(n("80b1")),o=a(n("efe5")),s=function(){function t(e){(0,r.default)(this,t),Object.assign(this,e)}return(0,o.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t),a=t.algin,r=void 0===a?"right":a,o=t.lineType,s=void 0===o?"solid":o,u=t.pattern,l=void 0===u?[6,6]:u,c=t.offset,d=void 0===c?6:c,f=t.lineCap,h=void 0===f?"butt":f,v=(0,i.default)((0,i.default)({},n),{},{algin:r,lineType:s,pattern:l,offset:d,lineCap:h});return e?this.commonUtilMethods.conversionUnit(v):v}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.Context,a=this.commonUtilMethods,i=this.commonDrawMethods,r=a.canvasWidth,o=a.is2d,s=this.getDrawParams(t,e),u=s.x,l=s.y,c=s.color,d=s.w,f=s.algin,h=s.alpha,v=s.lineType,g=s.pattern,p=s.offset,m=s.lineCap,w=s.lineWidth,b=s.windowAlign,x=s.offsetRight;switch(n.beginPath(),i.setAlpha(h),"dashed"===v&&(o?(n.setLineDash(g),n.lineDashOffset=p):n.setLineDash(g,p)),o?n.lineCap=m:n.setLineCap(m),i.setLineWidth(w),i.setStrokeStyle(c),f){case"right":"none"!==b&&(u=i.computedCenterX(r,d,b,x)),n.moveTo(u,l),n.lineTo(d+u,l);break;case"left":"none"!==b&&(u=i.computedCenterX(r,d,b,x)),n.moveTo(u,l),n.lineTo("none"==b?u-d:u+d,l);break;case"top":n.moveTo(u,l),n.lineTo(u,-(l+d));break;case"bottom":n.moveTo(u,l),n.lineTo(u,l+d);break}n.stroke(),n.closePath(),o?(n.setLineDash([0,0]),n.lineDashOffset=0):n.setLineDash([0,0]),i.setAlpha(1)}}]),t}();e.default=s},"806e":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4626"),n("5ac7"),n("1851");var i=a(n("fcf3")),r=a(n("80b1")),o=a(n("efe5")),s=function(){function t(e){(0,r.default)(this,t),Object.assign(this,e)}return(0,o.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t);return e?this.commonUtilMethods.conversionUnit(n):n}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.Context,a=this.commonUtilMethods,r=this.commonDrawMethods,o=a.canvasWidth,s=(a.is2d,a.pxToRpx),u=a.unit,l=this.getDrawParams(t,e),c=l.x,d=l.y,f=l.w,h=l.h,v=l.r,g=l.color,p=l.alpha,m=l.isFill,w=l.lineWidth,b=l.windowAlign,x=l.rotate,y=l.drawImage,k=l.borderColor,C=l.borderWidth,T=l.borderType,P=l.shadow,I=l.gradient,_=l.offsetRight;"black"===g&&y?g="none":"black"===g&&(g="#ffffff"),"number"===typeof v&&2*v>h&&(v=h/2),"none"!==b&&(c=r.computedCenterX(o,f,b,_)||c),!y&&x.deg&&(n.save(),r.setRotate(c,d,f,h,x)),y&&P.show&&r.setShadow(P.x,P.y,P.blur,P.color),!y&&P.show&&r.setShadow(P.x,P.y,P.blur,P.color),n.beginPath(),r.setAlpha(p);var S=0,M=0,A=0,D=0;if("object"===(0,i.default)(v)){var L=v.length;1===L?(M=v[0],S=v[0],A=v[0],D=v[0]):2===L?(M=v[0],S=v[1],A=v[0],D=v[1]):3===L?(M=v[0],S=v[1],A=v[2],D=v[1]):4===L&&(M=v[0],S=v[1],A=v[2],D=v[3])}else if("string"===typeof T)switch(T){case"tr":S=v;break;case"tl":M=v;break;case"br":A=v;break;case"bl":D=v;break;default:S=v,M=v,A=v,D=v}else T instanceof Array&&"number"===typeof v&&(T.includes("tr")?S=v:T.includes("tl")?M=v:T.includes("br")?A=v:T.includes("bl")?D=v:T.includes("default")&&(S=v,M=v,A=v,D=v));if(n.lineTo(c+M,d),n.arc(c+f-S,d+S,S,1.5*Math.PI,0,!1),n.lineTo(c+f,d+h-A),n.arc(c+f-A,d+h-A,A,0,.5*Math.PI,!1),n.lineTo(c+D,d+h),n.arc(c+D,d+h-D,D,.5*Math.PI,Math.PI,!1),n.lineTo(c,d+M),n.arc(c+M,d+M,M,1*Math.PI,1.5*Math.PI,!1),n.closePath(),m){if(0!=C&&(r.setLineWidth(C),r.setStrokeStyle(k),n.stroke()),I.show){var E=I.type,R=void 0===E?"linear":E,z=I.relative,B=I.position,U=I.colors;g=a.getGradient(R,z,a.conversionUnit(B),U,{x:c,y:d})}(!y||y&&"none"!==g)&&(r.setFillStyle(g),n.fill())}else r.setLineWidth(w),r.setStrokeStyle(g),n.stroke();return r.setAlpha(1),!y&&x.deg&&n.restore(),P.show&&r.setShadow(0,0,0,"black"),{success:!0,w:"rpx"===u?s(f):f,h:"rpx"===u?s(h):h}}}]),t}();e.default=s},8280:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("1851");var i=a(n("9b1b")),r=a(n("80b1")),o=a(n("efe5")),s=function(){function t(e){(0,r.default)(this,t),Object.assign(this,e)}return(0,o.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t),a=t.s,r=void 0===a?0:a,o=t.e,s=void 0===o?2*Math.PI:o,u=t.d,l=void 0!==u&&u,c=(0,i.default)((0,i.default)({},n),{},{s:r,e:s,d:l});return e?this.commonUtilMethods.conversionUnit(c):c}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.Context,a=this.commonUtilMethods,i=this.commonDrawMethods,r=a.canvasWidth,o=(a.is2d,this.getDrawParams(t,e)),s=o.x,u=o.y,l=o.r,c=o.s,d=o.e,f=o.d,h=o.alpha,v=o.isFill,g=o.lineWidth,p=o.color,m=o.rotate,w=o.windowAlign,b=o.borderColor,x=o.borderWidth,y=o.offsetRight,k=o.drawImage,C=o.shadow,T=o.gradient;if("black"===p&&k?p="none":"black"===p&&(p="#ffffff"),C.show&&i.setShadow(C.x,C.y,C.blur,C.color),s+=l,u+=l,"none"!==w&&(s=i.computedCenterX(r,2*l,w,y),s+=l),!k&&m.deg&&(n.save(),i.setRotate(s-l,u-l,2*l,2*l,m)),n.beginPath(),i.setAlpha(h),n.arc(s,u,l,c,d,f),v){if(0!=x&&(i.setLineWidth(x),i.setStrokeStyle(b),n.stroke()),T.show){var P=T.type,I=T.relative,_=T.position,S=T.colors;p=a.getGradient(P||"linear",I,a.conversionUnit(_),S,{x:s,y:u})}(!k||k&&"none"!==p)&&(i.setFillStyle(p),n.fill())}else i.setLineWidth(g),i.setStrokeStyle(p),n.stroke();i.setAlpha(1),!k&&m.deg&&n.restore(),C.show&&i.setShadow(0,0,0,"black")}}]),t}();e.default=s},9209:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("bf0f"),n("aa9c"),n("64aa");var i=a(n("2634")),r=a(n("2fdc")),o=a(n("a823")),s=a(n("9b1b")),u=a(n("80b1")),l=a(n("efe5")),c=a(n("185d")),d=["x","y","image","windowAlign","offsetRight"],f=function(){function t(e){(0,u.default)(this,t),Object.assign(this,e)}return(0,l.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t),a=t.text,i=void 0===a?"":a,r=t.image,o=void 0===r?{}:r,u=t.size,l=void 0===u?100:u,c=t.lv,d=void 0===c?3:c,f=t.background,h=void 0===f?"#ffffff":f,v=t.foreground,g=void 0===v?"#000000":v,p=t.pdground,m=void 0===p?"#000000":p,w=(0,s.default)((0,s.default)({},n),{},{text:String(i)||"",image:o,size:l,correctLevel:d,background:h,foreground:g,pdground:m});return e?this.commonUtilMethods.conversionUnit(w):w}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.Context,s=this.commonUtilMethods,u=this.commonDrawMethods,l=s.canvasWidth,f=(s.is2d,this.getDrawParams(e,n)),h=f.x,v=f.y,g=f.image,p=f.windowAlign,m=f.offsetRight,w=(0,o.default)(f,d);return new Promise(function(){var e=(0,r.default)((0,i.default)().mark((function e(r){var o,d,f,b,x,y,k,C,T,P,I,_,S,M,A,D,L,E,R,z,B,U,F,O,j;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"none"!==p&&(h=u.computedCenterX(l,w.size,p,m)),o=[],d=null,f=o.length,b=0,x=0;case 6:if(!(x<f)){e.next=14;break}if(b=x,o[x].text!=w.text||o[x].text.correctLevel!=w.correctLevel){e.next=11;break}return d=o[x].obj,e.abrupt("break",14);case 11:x++,e.next=6;break;case 14:for(b==f&&(d=new c.default(w.text,w.correctLevel),o.push({text:w.text,correctLevel:w.correctLevel,obj:d})),y=function(t){var e=t.options;return e.pdground&&(t.row>1&&t.row<5&&t.col>1&&t.col<5||t.row>t.count-6&&t.row<t.count-2&&t.col>1&&t.col<5||t.row>1&&t.row<5&&t.col>t.count-6&&t.col<t.count-2)?e.pdground:e.foreground},k=d.getModuleCount(),C=w.size,T=s.getConvertedValue(g.size)||30,P=(C/k).toPrecision(4),I=(C/k).toPrecision(4),_=0;_<k;_++)for(S=0;S<k;S++)M=Math.ceil((S+1)*P)-Math.floor(S*P),A=Math.ceil((_+1)*P)-Math.floor(_*P),D=y({row:_,col:S,count:k,options:w}),u.setFillStyle(d.modules[_][S]?D:w.background),a.fillRect(h+Math.round(S*P),v+Math.round(_*I),M,A);if(!g.src){e.next=31;break}return L=n?t.commonUtilMethods.conversionUnit(g):g,E=L.src,R=L.r,z=L.color,B=L.borderWidth,U=L.borderColor,F=h+Number(((C-T)/2).toFixed(2)),O=v+Number(((C-T)/2).toFixed(2)),e.next=28,u.drawParams.drawImage.draw({x:F,y:O,w:T,h:T,src:E,r:R,color:z,borderWidth:B,borderColor:U,drawType:"rect",isCompressImage:!1},!1);case 28:if(j=e.sent,j.success){e.next=31;break}return e.abrupt("return",r(j));case 31:return e.abrupt("return",r({success:!0}));case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),t}();e.default=f},"9cd2":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4626"),n("5ac7"),n("c223"),n("fd3c"),n("71cb"),n("f18a"),n("bf0f"),n("2797"),n("5ef2"),n("aa9c"),n("dc8a"),n("aa77"),n("f7a5");var i=a(n("3471")),r=a(n("a823")),o=a(n("9b1b")),s=a(n("80b1")),u=a(n("efe5")),l=(n("ccb2"),["vorizontal","vertical"]),c=["text","color","i","fontSize","siblingsCenter","siblingsNum"],d=function(){function t(e){(0,s.default)(this,t),Object.assign(this,e)}return(0,u.default)(t,[{key:"getDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.commonUtilMethods.getGlobalDataDrawParams(t),a=t.text,i=void 0===a?"":a,r=t.textIndent,s=void 0===r?0:r,u=t.lastWidth,l=void 0===u?0:u,c=t.font,d=void 0===c?{}:c,f=t.textAlign,h=void 0===f?"none":f,v=t.baseline,g=void 0===v?"top":v,p=t.line,m=void 0===p?{}:p,w=t.highlightText,b=void 0===w?[]:w,x=t.textRect,y=void 0===x?{show:!1,isFill:!0,lineWidth:1}:x,k=(0,o.default)((0,o.default)({},n),{},{text:String(i)||"",textIndent:s,lastWidth:l,font:e?this.commonUtilMethods.conversionUnit(this.getFontStyle(d)):this.getFontStyle(d,e),textAlign:h,baseline:g,line:this.getTextLine(m,e),highlightText:b,textRect:y});return e?this.commonUtilMethods.conversionUnit(k):k}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.Context,a=this.commonUtilMethods,s=this.commonDrawMethods,u=a.canvasWidth,c=a.is2d,d=this.getDrawParams(t,e),f=d.x,h=d.y,v=d.w,g=(d.h,d.text),p=d.textIndent,m=d.lastWidth,w=d.font,b=d.color,x=d.alpha,y=d.isFill,k=d.line,C=d.windowAlign,T=d.textAlign,P=d.baseline,I=d.highlightText,_=d.textRect,S=d.offsetRight;n.save(),n.beginPath(),s.setAlpha(x),n.font=w.style,c?n.textBaseline=P:n.setTextBaseline(P),"string"!==typeof g&&(g+="");var M=t.textArr||s.computedFontTextLineHeight({x:f,y:h,w:v,text:g,textIndent:p,lastWidth:m,font:w,line:k,textAlign:T,windowAlign:C,color:b,offsetRight:S,highlightText:I});if(_.show){var A,D=a.conversionUnit(_),L=D.vorizontal,E=D.vertical,R=(0,r.default)(D,l),z=M[0],B=v===u?null!==(A=a.conversionUnit(t).tw)&&void 0!==A?A:z.w:v,U=z.x-L,F=z.y-E,O=M[M.length-1].y+w.fontSize,j=O-z.y;j+=2*E,B+=2*L,s.drawParams.drawRect.draw((0,o.default)({x:U,y:F,w:B,h:j},R),!1)}n.font=w.style;var W=0;W=w.style.includes(8)?8:w.style.includes(16)?16:w.fontSize;var N,$=(0,i.default)(M);try{for($.s();!(N=$.n()).done;){var H=N.value,G=H.text,q=H.x,X=H.y,V=H.tx,Q=H.ty,J=H.tw,K=H.fontColor,Y=H.fontSize,Z=H.font;if(W!==Y){var tt=w.fontStyle,et=w.fontVariant,nt=w.fontWeight,at=w.fontFamily,it=Z.fontStyle,rt=Z.fontVariant,ot=Z.fontWeight,st=Z.fontFamily;n.font="".concat(it||tt," ").concat(rt||et," ").concat(ot||nt," ").concat(Y||W,"px ").concat(st||at),W=Y}y?(s.setFillStyle(K),n.fillText(G,q,X)):(s.setStrokeStyle(K),n.strokeText(G,q,X)),"none"!==k.lineStyle&&(y?s.setFillStyle(b):s.setStrokeStyle(b),s.drawParams.drawLine.draw({x:V,y:Q,w:J,color:b,lineType:k.lineType,lineWidth:k.lineWidth},!1))}}catch(ut){$.e(ut)}finally{$.f()}n.restore(),n.font=this.getFontStyle().style,s.setAlpha(1)}},{key:"getFontStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,o.default)((0,o.default)({},this.commonUtilMethods.fontStyle),t),a=n.size,i=n.family,r=n.style,s=n.variant,u=n.weight;return{fontSize:a,fontSizeBefore:a,fontFamily:i,fontStyle:r,fontVariant:s,fontWeight:u,style:"".concat(r||"normal"," ").concat(s||"normal"," ").concat(u||"normal"," ").concat(e?this.commonUtilMethods.getConvertedValue(a):a,"px ").concat(i||"sans-serif")}}},{key:"getTextLine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.num,a=void 0===n?-1:n,i=t.height,r=void 0===i?0:i,o=t.style,s=void 0===o?"none":o,u=t.type,l=void 0===u?"solid":u,c=t.width,d=void 0===c?1:c;return{lineNum:a,lineHeight:e?this.commonUtilMethods.getConvertedValue(r):r,lineStyle:s,lineType:l,lineWidth:d}}},{key:"formatTextData",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=t.includes("\n"),o=0!==i.length;if(r){var s=t.split("\n").map((function(t,e){return{text:t,isBr:e>0}}));return o?s.map((function(t){var r=t.text,o=t.isBr;return e.formatHighlightText(r,n,a,i,o)})).flat():s.map((function(t){var e=t.text,i=t.isBr;return{text:e,color:n,font:a,isBr:i}}))}return o?this.formatHighlightText(t,n,a,i):[{text:t,color:n,font:a}]}},{key:"formatHighlightText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=[],u=i.map((function(t){return t.i=0,t})),l=!0,d=[];while(l)u.forEach((function(i){var o=i.text,s=i.color,u=void 0===s?n:s,f=i.i,h=i.fontSize,v=i.siblingsCenter,g=void 0===v?"bottom":v,p=i.siblingsNum,m=void 0===p?0:p,w=(0,r.default)(i,c),b=t.indexOf(o,f);t.includes(o)&&-1!==b?(i.i=b+1+o.length,d.push({index:b,length:o.length,color:u,fontSize:null!==h&&void 0!==h?h:a.fontSize,font:0!==Object.keys(w).length?e.getFontStyle(w,!1):a,siblingsCenter:g,siblingsNum:m})):l=!1}));for(var f=d.map((function(t){return t.index})),h="",v=function(e){if(f.includes(e)){var i=d.find((function(t){return t.index===e})),r=i.length,u=i.color,l=i.fontSize,c=i.font,v=i.siblingsCenter,p=i.siblingsNum;return h&&(s.push({text:h,color:n,fontSize:a.fontSize,font:a,isBr:o}),o&&(o=!1),h=""),s.push({text:t.slice(e,e+r),color:u,fontSize:l,font:c,siblingsCenter:v,siblingsNum:p,isBr:o}),o&&(o=!1),e+=r-1,g=e,"continue"}h+=t[e],e===t.length-1&&(s.push({text:h,color:n,fontSize:a.fontSize,font:a,isBr:o}),o&&(o=!1)),g=e},g=0;g<t.length;g++)v(g);return s}}]),t}();e.default=d},a823:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(null==t)return{};var n,i,r=(0,a.default)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r},n("01a2"),n("5ef2");var a=function(t){return t&&t.__esModule?t:{default:t}}(n("cfa9"))},a832:function(t,e,n){"use strict";var a=n("ba2c"),i=n.n(a);i.a},ab47:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("64aa");var a=uni.getSystemInfoSync(),i={},r={name:"u-navbar",props:{height:{type:[String,Number],default:""},backIconColor:{type:String,default:"#606266"},backIconName:{type:String,default:"nav-back"},backIconSize:{type:[String,Number],default:"44"},backText:{type:String,default:""},backTextStyle:{type:Object,default:function(){return{color:"#606266"}}},title:{type:String,default:""},titleWidth:{type:[String,Number],default:"250"},titleColor:{type:String,default:"#606266"},titleBold:{type:Boolean,default:!1},titleSize:{type:[String,Number],default:32},isBack:{type:[Boolean,String],default:!0},background:{type:Object,default:function(){return{background:"#ffffff"}}},isFixed:{type:Boolean,default:!0},immersive:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:""},customBack:{type:Function,default:null}},data:function(){return{menuButtonInfo:i,statusBarHeight:a.statusBarHeight}},computed:{navbarInnerStyle:function(){var t={};return t.height=this.navbarHeight+"px",t},navbarStyle:function(){var t={};return t.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.navbar,Object.assign(t,this.background),t},titleStyle:function(){var t={};return t.left=(a.windowWidth-uni.upx2px(this.titleWidth))/2+"px",t.right=(a.windowWidth-uni.upx2px(this.titleWidth))/2+"px",t.width=uni.upx2px(this.titleWidth)+"px",t},navbarHeight:function(){return this.height?this.height:44}},created:function(){},methods:{goBack:function(){"function"===typeof this.customBack?this.customBack.bind(this.$u.$parent.call(this))():uni.navigateBack()}}};e.default=r},abe5:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.saveImageToPhotosAlbum=e.downloadFile=e.countTextLength=e.conversionUnit=e.base64ToPathFn=void 0,n("5c47"),n("0506"),n("bf0f"),n("2797"),n("dc8a"),n("4626"),n("fd3c"),n("c223"),n("d4b5");var i=a(n("fcf3")),r=a(n("3471")),o=n("c40e");function s(t){var e;return e=/a/.test(t)?.552734375:/b/.test(t)?.638671875:/c/.test(t)?.50146484375:/d/.test(t)?.6396484375:/e/.test(t)?.5673828125:/f/.test(t)?.3466796875:/g/.test(t)?.6396484375:/h/.test(t)?.61572265625:/i/.test(t)?.26611328125:/j/.test(t)?.26708984375:/k/.test(t)?.54443359375:/l/.test(t)?.26611328125:/m/.test(t)?.93701171875:/n/.test(t)?.6162109375:/o/.test(t)?.6357421875:/p/.test(t)?.638671875:/q/.test(t)?.6396484375:/r/.test(t)?.3818359375:/s/.test(t)?.462890625:/t/.test(t)?.37255859375:/u/.test(t)?.6162109375:/v/.test(t)?.52490234375:/w/.test(t)?.78955078125:/x/.test(t)?.5068359375:/y/.test(t)?.529296875:/z/.test(t)?.49169921875:/A/.test(t)?.70361328125:/B/.test(t)?.62744140625:/C/.test(t)?.6689453125:/D/.test(t)?.76171875:/E/.test(t)?.5498046875:/F/.test(t)?.53125:/G/.test(t)?.74365234375:/H/.test(t)?.7734375:/I/.test(t)?.2939453125:/J/.test(t)?.39599609375:/K/.test(t)?.634765625:/L/.test(t)?.51318359375:/M/.test(t)?.97705078125:/N/.test(t)?.81298828125:/O/.test(t)?.81494140625:/P/.test(t)?.61181640625:/Q/.test(t)?.81494140625:/R/.test(t)?.65283203125:/S/.test(t)?.5771484375:/T/.test(t)?.5732421875:/U/.test(t)?.74658203125:/V/.test(t)?.67626953125:/W/.test(t)?1.017578125:/X/.test(t)?.64501953125:/Y/.test(t)?.603515625:/Z/.test(t)?.6201171875:/[0-9]/.test(t)?.58642578125:/[\u4e00-\u9fa5]/.test(t)?1:/ /.test(t)?.2958984375:/\`/.test(t)?.294921875:/\~/.test(t)?.74169921875:/\!/.test(t)?.3125:/\@/.test(t)?1.03125:/\#/.test(t)?.63818359375:/\$/.test(t)?.58642578125:/\%/.test(t)?.8896484375:/\^/.test(t)?.74169921875:/\&/.test(t)?.8701171875:/\*/.test(t)?.455078125:/\(/.test(t)||/\)/.test(t)?.333984375:/\_/.test(t)?.4482421875:/\-/.test(t)?.4326171875:/\+/.test(t)||/\=/.test(t)?.74169921875:/\|/.test(t)?.26904296875:/\\/.test(t)?.416015625:/\[/.test(t)||/\]/.test(t)?.333984375:/\;/.test(t)?.24072265625:/\'/.test(t)?.25634765625:/\,/.test(t)||/\./.test(t)?.24072265625:/\//.test(t)?.42724609375:/\{/.test(t)||/\}/.test(t)?.333984375:/\:/.test(t)?.24072265625:/\"/.test(t)?.435546875:/\</.test(t)||/\>/.test(t)?.74169921875:/\?/.test(t)?.48291015625:1,e}e.countTextLength=function(t,e,n){var a=function(t,e,n){var a;if(t.measureText)return(null===(a=t.measureText(e))||void 0===a?void 0:a.width)||0;var i,o=0,u=(0,r.default)(e);try{for(u.s();!(i=u.n()).done;){var l=i.value;o+=s(l)}}catch(c){u.e(c)}finally{u.f()}return o*n}(t,e,n);return 0!==a?a:e.length*n};e.conversionUnit=function t(e,n,a){var r=["quality","alpha","deg","zIndex","e","s","drawImage","drawModeImage"];if(e instanceof Array){return function(){return e.map((function(e){return t(e,n,a)}))}()}return function(){var o=Object.assign({},e);return Object.keys(e).forEach((function(s){var u=e[s];r.includes(s)||("number"===typeof u?375.0001!==u&&(o[s]=n.call(a,u)):"object"!==(0,i.default)(u)||u instanceof Array?u instanceof Array&&(o[s]=u.map((function(t){return"number"===typeof t?n.call(a,t):t}))):o[s]=t(o[s],n,a))})),o}()};e.downloadFile=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){var a=e.header,i=void 0===a?{}:a;try{uni.downloadFile({url:t,header:i,success:function(t){return n({success:!0,data:t})},fail:function(e){return n({success:!1,message:"下载资源".concat(t,"失败---").concat(JSON.stringify(e))})}})}catch(r){return n({success:!1,msg:"下载资源".concat(t,"失败---").concat(JSON.stringify(r))})}}))};e.base64ToPathFn=function(t){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)\s*$/i.test(t)?(0,o.base64ToPath)(t):Promise.resolve(t)};e.saveImageToPhotosAlbum=function(t){return new Promise((function(e){uni.showLoading({title:"保存中..."}),uni.saveImageToPhotosAlbum({filePath:t,success:function(t){e({success:!0,data:t.file})},fail:function(t){e({success:!1,message:t})},complete:function(){uni.hideLoading()}})}))}},ae02:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uIcon:n("d28f").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{},[n("v-uni-view",{staticClass:"u-navbar",class:{"u-navbar-fixed":t.isFixed,"u-border-bottom":t.borderBottom},style:[t.navbarStyle]},[n("v-uni-view",{staticClass:"u-status-bar",style:{height:t.statusBarHeight+"px"}}),n("v-uni-view",{staticClass:"u-navbar-inner",style:[t.navbarInnerStyle]},[t.isBack?n("v-uni-view",{staticClass:"u-back-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-icon-wrap"},[n("u-icon",{attrs:{name:t.backIconName,color:t.backIconColor,size:t.backIconSize}})],1),t.backText?n("v-uni-view",{staticClass:"u-icon-wrap u-back-text u-line-1",style:[t.backTextStyle]},[t._v(t._s(t.backText))]):t._e()],1):t._e(),t.title?n("v-uni-view",{staticClass:"u-navbar-content-title",style:[t.titleStyle]},[n("v-uni-view",{staticClass:"u-title u-line-1",style:{color:t.titleColor,fontSize:t.titleSize+"rpx",fontWeight:t.titleBold?"bold":"normal"}},[t._v(t._s(t.title))])],1):t._e(),n("v-uni-view",{staticClass:"u-slot-content"},[t._t("default")],2),n("v-uni-view",{staticClass:"u-slot-right"},[t._t("right")],2)],1)],1),t.isFixed&&!t.immersive?n("v-uni-view",{staticClass:"u-navbar-placeholder",style:{width:"100%",height:Number(t.navbarHeight)+t.statusBarHeight+"px"}}):t._e()],1)},r=[]},b3e5:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uIcon:n("d28f").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:[{poster_container_active:t.realShow},"poster_container"]},[n("v-uni-view",{staticClass:"poster"},[n("v-uni-view",{staticClass:"poster_close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"close-circle",color:"#fff",size:"80"}})],1),n("v-uni-view",{staticClass:"poster_qrcode"},[n("v-uni-image",{attrs:{src:t.qrCode,mode:"widthFix"}})],1),t.realShow?n("v-uni-canvas",{style:[t.canvasStyle],attrs:{"canvas-id":t.canvasId},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.canvasIdErrorCallback.apply(void 0,arguments)}}}):t._e()],1),n("v-uni-view",{staticClass:"poster_tool"},[n("v-uni-view",{staticClass:"poster_tool_item"},[n("v-uni-button",{attrs:{"open-type":"share"}},[n("u-icon",{attrs:{name:"weixin-circle-fill",color:"green",size:"38"}}),n("v-uni-text",[t._v("分享到微信")])],1)],1),n("v-uni-view",{staticClass:"poster_tool_item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.savePoster.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"download",color:"#00aaff",size:"38"}}),n("v-uni-text",{staticStyle:{"margin-top":"10rpx"}},[t._v("保存到本地")])],1)],1)],1)},r=[]},b810:function(t,e,n){"use strict";var a=n("bc75"),i=n.n(a);i.a},b8f0:function(t,e,n){"use strict";var a=n("c28f"),i=n.n(a);i.a},ba2c:function(t,e,n){var a=n("3f2c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("4eeb2dca",a,!0,{sourceMap:!1,shadowMode:!1})},bb30:function(t,e,n){"use strict";var a=n("c1fd"),i=n.n(a);i.a},bc75:function(t,e,n){var a=n("eaf5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("bebfc734",a,!0,{sourceMap:!1,shadowMode:!1})},c1fd:function(t,e,n){var a=n("4e37");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("2dc7d652",a,!0,{sourceMap:!1,shadowMode:!1})},c28f:function(t,e,n){var a=n("d937");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("6bca32d5",a,!0,{sourceMap:!1,shadowMode:!1})},c40e:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.base64ToPath=function(t){return new Promise((function(e,n){if("object"===("undefined"===typeof window?"undefined":(0,i.default)(window))&&"document"in window){t=t.split(",");var a=t[0].match(/:(.*?);/)[1],r=atob(t[1]),o=r.length,s=new Uint8Array(o);while(o--)s[o]=r.charCodeAt(o);return e((window.URL||window.webkitURL).createObjectURL(new Blob([s],{type:a})))}var u=t.match(/data\:\S+\/(\S+);/);u?u=u[1]:n(new Error("base64 error"));var l=Date.now()+"."+u;if("object"!==("undefined"===typeof plus?"undefined":(0,i.default)(plus)))if("object"===("undefined"===typeof wx?"undefined":(0,i.default)(wx))&&wx.canIUse("getFileSystemManager")){var c=wx.env.USER_DATA_PATH+"/"+l;wx.getFileSystemManager().writeFile({filePath:c,data:t.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){e(c)},fail:function(t){n(t)}})}else n(new Error("not support"));else{var d=new plus.nativeObj.Bitmap("bitmap"+Date.now());d.loadBase64Data(t,(function(){var t="_doc/uniapp_temp/"+l;d.save(t,{},(function(){d.clear(),e(t)}),(function(t){d.clear(),n(t)}))}),(function(t){d.clear(),n(t)}))}}))},e.pathToBase64=function(t){return new Promise((function(e,n){if("object"===("undefined"===typeof window?"undefined":(0,i.default)(window))&&"document"in window){if("function"===typeof FileReader){var a=new XMLHttpRequest;return a.open("GET",t,!0),a.responseType="blob",a.onload=function(){if(200===this.status){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=n,t.readAsDataURL(this.response)}},a.onerror=n,void a.send()}var r=document.createElement("canvas"),o=r.getContext("2d"),s=new Image;return s.onload=function(){r.width=s.width,r.height=s.height,o.drawImage(s,0,0),e(r.toDataURL()),r.height=r.width=0},s.onerror=n,void(s.src=t)}"object"!==("undefined"===typeof plus?"undefined":(0,i.default)(plus))?"object"===("undefined"===typeof wx?"undefined":(0,i.default)(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:t,encoding:"base64",success:function(t){e("data:image/png;base64,"+t.data)},fail:function(t){n(t)}}):n(new Error("not support")):plus.io.resolveLocalFileSystemURL(function(t){if(0===t.indexOf("_www")||0===t.indexOf("_doc")||0===t.indexOf("_documents")||0===t.indexOf("_downloads"))return t;if(0===t.indexOf("file://"))return t;if(0===t.indexOf("/storage/emulated/0/"))return t;if(0===t.indexOf("/")){var e=plus.io.convertAbsoluteFileSystem(t);if(e!==t)return e;t=t.substr(1)}return"_www/"+t}(t),(function(t){t.file((function(t){var a=new plus.io.FileReader;a.onload=function(t){e(t.target.result)},a.onerror=function(t){n(t)},a.readAsDataURL(t)}),(function(t){n(t)}))}),(function(t){n(t)}))}))};var i=a(n("fcf3"));n("5ef2"),n("bf0f"),n("7a76"),n("c9b5"),n("5c47"),n("2c10"),n("15d1"),n("d5c6"),n("5a56"),n("f074"),n("4db2"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("18f7"),n("de6c"),n("dc89"),n("2425"),n("a1c1")},c4f4:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("2634")),r=a(n("2fdc")),o=a(n("39d8")),s=(n("abe5"),a(n("6da4"))),u=a(n("01ad")),l={data:function(){var t;return t={share_ma:"",url:"",share_bg:"",userInfo:null,show:!1,showPoster:!1,posterImage:"",codeShareUrl:"",appShareUrl:"",localPosterCover:"https://xcooo.oss-cn-hangzhou.aliyuncs.com/wxapp/share_bg.png",h5LocalPosterCover:"",mainbg:"",sysConfig:""},(0,o.default)(t,"userInfo",""),(0,o.default)(t,"qrCode",""),(0,o.default)(t,"realShow",!1),(0,o.default)(t,"cacheImage",""),t},components:{PosterCanvas:s.default,Poster:u.default},onLoad:function(){},onShow:function(){var t=this;this.$store.dispatch("getAppConfig").then((function(e){console.log(e),t.sysConfig=e.data,t.mainbg=e.data.share_bg,uni.getImageInfo({src:e.data.poster_bg,success:function(e){t.h5LocalPosterCover=e.path}})}));var e=this;this.$store.dispatch("getUserInfo").then((function(t){console.log(t,"userInfo"),e.userInfo=t.data,e.codeShareUrl=t.data.codeShareUrl,e.share_ma=t.data.invite_code,e.url=t.data.share_url}))},methods:{sharePoster:function(){this.show=!1,this.$refs.childCanvas.drawPoster().then((function(){uni.hideLoading()}))},canvasSuccess:function(t){var e=t.showPoster,n=t.posterImage;this.showPoster=e,this.posterImage=n,console.log(t)},saveImage:function(){var t=this;return(0,r.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showToast({title:"H5不支持API保存图片,请使用长按保存!!!",icon:"none"}),e.abrupt("return");case 4:if(n=e.sent,n.success){e.next=8;break}return uni.showToast({title:"保存图片失败!!!",icon:"none"}),e.abrupt("return");case 8:t.showPoster=!1;case 9:case"end":return e.stop()}}),e)})))()},handleInvite:function(){this.$refs.poster.show(this.share_ma)},copy:function(){if(""!=this.url){var t=decodeURIComponent(this.url+"/#/?invite_code="+this.share_ma);uni.setClipboardData({data:t,success:function(){}})}else this.$tip.tip("出错了，请稍后再试")},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"邀请好友得豪礼",path:"/pages/box/box?invite_code="+this.share_ma}}}};e.default=l},c92e:function(t,e,n){"use strict";n.r(e);var a=n("ab47"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},ccb2:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.CommonUtilMethods=e.CommonDrawMethods=void 0,e.sleep=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise((function(e){setTimeout((function(){e(!0)}),t)}))},n("4626"),n("5ac7"),n("64aa"),n("bd06"),n("8f71"),n("bf0f"),n("473f"),n("aa9c"),n("71cb"),n("f18a"),n("fd3c"),n("dd2b"),n("aa77"),n("dc69");var i=a(n("3471")),r=a(n("9b1b")),o=a(n("80b1")),s=a(n("efe5")),u=n("abe5"),l=function(){function t(e){(0,o.default)(this,t);var n=e.unit,a=e.type,i=e.width,r=e.height,s=e.fontStyle;this.unit=n,this.type=a,this.is2d="2d"===a,this.width=i,this.height=r,this.fontStyle=s,this.Context=null,this.canvas=null}return(0,s.default)(t,[{key:"setCanvasStyle",value:function(){var t=this.width,e=this.height;this.canvasWidth=this.getConvertedValue(t),this.canvasHeight=this.getConvertedValue(e)}},{key:"getConvertedValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===t?0:"px"===this.unit?t:375.0001===t?375.0001:uni.upx2px(t)}},{key:"pxToRpx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t/(uni.upx2px(100)/100)}},{key:"rpxToPx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!1;return!t.includes("px")||t.includes("r")||t.includes("u")?t.includes("rpx")?t=Number(t.split("rpx")[0]):t.includes("upx")&&(t=Number(t.split("upx")[0])):(t=Number(t.split("px")[0]),e=!0),e?t:uni.upx2px(t)}},{key:"conversionUnit",value:function(t){return(0,u.conversionUnit)(t,this.getConvertedValue,this)}},{key:"getGlobalDataDrawParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.width,n=t.x,a=void 0===n?0:n,i=t.y,o=void 0===i?0:i,s=t.w,u=void 0===s?e:s,l=t.h,c=void 0===l?0:l,d=t.r,f=void 0===d?0:d,h=t.color,v=void 0===h?"black":h,g=t.alpha,p=void 0===g?1:g,m=t.isFill,w=void 0===m||m,b=t.lineWidth,x=void 0===b?1:b,y=t.windowAlign,k=void 0===y?"none":y,C=t.rotate,T=void 0===C?{}:C,P=t.drawImage,I=void 0!==P&&P,_=t.borderColor,S=void 0===_?"#000000":_,M=t.borderWidth,A=void 0===M?0:M,D=t.borderType,L=void 0===D?"default":D,E=t.offsetRight,R=void 0===E?0:E,z=t.shadow,B=t.gradient,U=void 0===B?{}:B,F={x:a,y:o,w:u,h:c,r:f};return(0,r.default)((0,r.default)({},F),{},{color:v,lineWidth:x,borderWidth:A,borderColor:S,borderType:L,alpha:p,isFill:w,windowAlign:k,rotate:T,shadow:this.getShadow(z),gradient:U,offsetRight:R,drawImage:I})}},{key:"getShadow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.show,n=void 0!==e&&e,a=t.x,i=void 0===a?0:a,r=t.y,o=void 0===r?0:r,s=t.blur,u=void 0===s?0:s,l=t.color,c=void 0===l?"#000000":l;return{show:n,x:i,y:o,blur:u,color:c}}},{key:"getGradient",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.x0,o=void 0===r?0:r,s=n.y0,u=void 0===s?0:s,l=n.x1,c=void 0===l?0:l,d=n.y1,f=void 0===d?0:d,h=n.x,v=void 0===h?0:h,g=n.y,p=void 0===g?0:g,m=n.r,w=void 0===m?0:m;return"linear"==t?(n.x0=e?o+i.x:o,n.y0=e?u+i.y:u,n.x1=e?c+i.x:c,n.y1=e?f+i.y:f):(n.x=e?v+i.x:v,n.y=e?p+i.y:p,n.r=w),"linear"==t?this.getLinearGradient(n,a):this.getCircularGradient(n,a)}},{key:"getLinearGradient",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.Context,r=e.x0,o=e.y0,s=e.x1,u=e.y1,l=a.createLinearGradient(r,o,s,u),c=(0,i.default)(n);try{for(c.s();!(t=c.n()).done;){var d=t.value;l.addColorStop(d.stop,d.color)}}catch(f){c.e(f)}finally{c.f()}return l}},{key:"getCircularGradient",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.Context,r=e.x,o=e.y,s=e.r,u=a.createCircularGradient(r,o,s),l=(0,i.default)(n);try{for(l.s();!(t=l.n()).done;){var c=t.value;u.addColorStop(c.stop,c.color)}}catch(d){l.e(d)}finally{l.f()}return u}}]),t}();e.CommonUtilMethods=l;var c=function(){function t(e,n,a){(0,o.default)(this,t),this.Context=e,this.type=n,this.is2d="2d"===n,this.commonUtilMethods=a,this.drawParams={}}return(0,s.default)(t,[{key:"setAlpha",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.Context,n=this.is2d;n?e.globalAlpha=t:e.setGlobalAlpha(t)}},{key:"setFillStyle",value:function(t){var e=this.Context,n=this.is2d;n?e.fillStyle=t:e.setFillStyle(t)}},{key:"setLineWidth",value:function(t){var e=this.Context,n=this.is2d;n?e.lineWidth=t:e.setLineWidth(t)}},{key:"setStrokeStyle",value:function(t){var e=this.Context,n=this.is2d;n?e.strokeStyle=t:e.setStrokeStyle(t)}},{key:"setShadow",value:function(t,e,n,a){var i=this.Context;this.is2d;i.shadowOffsetX=t,i.shadowOffsetY=e,i.shadowColor=a,i.shadowBlur=n}},{key:"setRotate",value:function(t,e,n,a,i){var r=this.Context,o=i.deg,s=void 0===o?0:o,u=i.type,l=void 0===u?"middle":u,c=t,d=e;switch(l){case"topLeft":r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"topMiddle":c=t+n/2,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"topRight":c=t+n,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"bottomLeft":d=e+a,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"bottomMiddle":c=t+n/2,d=e+a,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"bottomRight":c=t+n,d=e+a,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"middleLeft":d=e+a/2,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"middleRight":c=t+n,d=e+a/2,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break;case"middle":c=t+n/2,d=e+a/2,r.translate(c,d),r.rotate(s*Math.PI/180),r.translate(-c,-d);break}}},{key:"setTriangleRotate",value:function(t,e,n,a,i,r){var o=this.Context,s=i.deg,u=void 0===s?0:s,l=i.type,c=void 0===l?"middle":l,d=t,f=e;switch(c){case"top":"right"==r?(d=t,f=e):(d=t+n/2,f=e),o.translate(d,f),o.rotate(u*Math.PI/180),o.translate(-d,-f);break;case"left":d=t,f=e+a,o.translate(d,f),o.rotate(u*Math.PI/180),o.translate(-d,-f);break;case"right":d=t+n,f=e+a,o.translate(d,f),o.rotate(u*Math.PI/180),o.translate(-d,-f);break;case"middle":d=t+n/2,f=e+a/2,o.translate(d,f),o.rotate(u*Math.PI/180),o.translate(-d,-f);break}}},{key:"computedCenterX",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"center"===n?(t-e)/2-a:"right"===n?t-e-a:0}},{key:"computedFontTextLineHeight",value:function(t){var e=t.x,n=t.y,a=t.w,i=(t.text,t.textIndent),r=t.lastWidth,o=t.font,s=t.line,u=t.textAlign,l=t.windowAlign,c=(t.defaultColor,t.offsetRight),d=(t.highlightText,this.Context),f=this.commonUtilMethods,h=(this.drawParams,f.canvasWidth),v=(f.is2d,o.fontSize);d.font=o.style;var g=s.lineNum,p=s.lineHeight,m=s.lineStyle,w=this.computedTextPositionAndRow(t);p=1==p?v+2:p;var b=w.length,x=w.findIndex((function(t){return t.rowIndex==g})),y=-1!=g&&-1!=x?x:b,k=w.filter((function(t){return t.rowIndex+1==g})).length,C=0;y>b&&(y=b);for(var T=[],P=w.reduce((function(t,e){var n=e.rowIndex,a=e.length;return t[n]=(t[n]||0)+a,t}),{}),I=0;I<y;I++){var _=w[I],S=_.text,M=_.length,A=_.lastText,D=_.limitText,L=_.limitTextWidth,E=_.color,R=_.rowIndex,z=_.dataX,B=_.fontSize,U=_.font,F=_.isCustomFont,O={},j=e+(null!==z&&void 0!==z?z:0),W=e+(null!==z&&void 0!==z?z:0);if(0===R&&0===z&&0!==i&&"none"==u&&"none"==l&&(M+=i,j+=i,W=j),S&&-1!=g&&R==g-1&&++C===k&&(r>0?(S=D,M=L):S=M+z+B>=a?A:S),"none"!==u&&M<=a){var N=a;M==a&&(N=h),W=this.computedCenterX(N,P[R],u),j+=W}"none"!==l&&"none"!==u?(j=this.computedCenterX(h,f.getConvertedValue(a),l,c),j+=W,W=j):"none"!==l&&(j=this.computedCenterX(h,f.getConvertedValue(a),l,c),W=j);var $=0,H=n+R*p;if("none"!==m&&(W+=f.getConvertedValue(0),$=M+f.getConvertedValue(0),"underline"==m?H+=B+1:"lineThrough"==m&&(H+=B/2)),O.w=M,O.text=S,O.x=j,0==p?(O.y=n+B*R,H+=B*R):O.y=n+p*R,F){var G=w[I],q=G.siblingsCenter,X=G.siblingsNum;O.y-=X,"center"===q?O.y-=(B-v)/2:"bottom"===q&&(O.y-=B-v)}O.fontColor=E,O.lineColor=E,O.tw=$,O.ty=H,O.tx=W,O.ey=O.y+B,O.fontSize=B,O.font=U,S&&T.push(O)}return T}},{key:"computedTextPositionAndRow",value:function(t){t.x,t.y;var e=t.w,n=t.text,a=t.textIndent,i=t.lastWidth,r=t.font,o=(t.line,t.textAlign,t.windowAlign,t.defaultColor),s=(t.offsetRight,t.highlightText),l=this.Context,c=(this.commonUtilMethods,this.drawParams),d=r.fontSize,f=c.drawText.formatTextData(n,o,r,s),h=0,v=0,g=0,p=d,m=r.style;return f.map((function(t,n){var r=t.text,o=t.color,s=t.font,c=t.siblingsCenter,f=t.siblingsNum,w=t.isBr,b=[],x=[],y="",k=0;w&&(++v,h=0);var C=s.fontSize||d;C!==p&&(p=C,m=s.style,l.font=m);for(var T=function(t){var e=0==b.length?0:b[b.length-1].index,n=Object.assign([],x).splice(e,t),a=0!=i&&0!=n.length&&n.reverse().find((function(t){return t.length<=i}));b.push({length:k,text:y,index:t-1,lastText:y.substring(0,y.length-1)+"...",limitText:a?a.text+"...":"",limitTextWidth:(0,u.countTextLength)(l,a.text+"...",C),color:o,rowIndex:v,dataX:h,fontSize:C,fontStyle:m,font:s,isCustomFont:p!==d,siblingsCenter:c,siblingsNum:f}),y=""},P=0;P<r.length;P++)y+=r[P],k=(0,u.countTextLength)(l,y,C),0!==a&&0===v&&0===g&&(h+=a,++g),h+k>e-C?(P===r.length-1&&(k=0),T(P),h=0,++v,k=0):((k>=e-C||P==r.length-1)&&(T(P),k>=e-C&&++v),x.push({index:P,text:y,length:k}));return h+=k,b})).flat()}}]),t}();e.CommonDrawMethods=c},cfa9:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i},n("dc8a"),n("5ef2")},d937:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.invite[data-v-5b6778a0]{width:100%;position:relative}.invite .bg[data-v-5b6778a0]{width:100%;position:absolute;top:0;z-index:1}.invite-earnings[data-v-5b6778a0]{position:absolute;width:%?690?%;height:%?200?%;left:%?30?%;box-sizing:border-box;top:0;z-index:9;margin-top:%?1250?%;display:flex;justify-content:space-around;align-items:center}.invite .earnings-list[data-v-5b6778a0]{text-align:center}.invite .earnings-list-text[data-v-5b6778a0]{font-size:%?22?%;color:#888}.invite .earnings-list-price[data-v-5b6778a0]{color:#fe7d57;font-size:%?36?%;font-weight:700;margin-top:%?20?%}.invite .earnings-list-price uni-text[data-v-5b6778a0]{font-size:%?26?%;margin-left:%?6?%;font-weight:400}.invite .earnings-list-btn[data-v-5b6778a0]{color:#fe7d57;font-size:%?22?%;margin-top:%?30?%;width:%?140?%;height:%?40?%;line-height:%?40?%;text-align:center;background-color:rgba(255,160,122,.4);border-radius:%?20?%}.invite .invite-step[data-v-5b6778a0]{position:absolute;width:%?690?%;height:%?200?%;left:%?30?%;box-sizing:border-box;top:0;z-index:9;margin-top:%?1620?%;display:flex;justify-content:space-around;align-items:center}.invite .invite-step uni-image[data-v-5b6778a0]{width:100%}.btn-ground[data-v-5b6778a0]{height:calc(%?100?% + constant(safe-area-inset-bottom));height:calc(%?100?% + env(safe-area-inset-bottom));width:%?690?%;position:fixed;bottom:0;z-index:10;left:%?30?%;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);display:flex;justify-content:space-between;align-items:center}.btn-ground-left[data-v-5b6778a0], .btn-ground-right[data-v-5b6778a0]{width:%?330?%;height:%?100?%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;font-size:%?34?%;font-weight:700}.btn-ground-left[data-v-5b6778a0]{background:#f7cdba;background:linear-gradient(0deg,#f7cdba,#fdf8f1);border-radius:10px;color:#fe7d57}.btn-ground-right[data-v-5b6778a0]{background:#e19b6e;background:linear-gradient(0deg,#e19b6e,#f27547);border-radius:10px;color:#fff}.invite-model[data-v-5b6778a0]{height:%?500?%;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.invite-model .invite-model-content[data-v-5b6778a0]{height:%?380?%;width:100%;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}.invite-model .invite-model-close[data-v-5b6778a0]{text-align:center;height:%?100?%;width:100%}.invite-model .content-title[data-v-5b6778a0]{background:#e19b6e;background:linear-gradient(0deg,#e19b6e,#f27547);border-radius:10px;width:%?200?%;height:%?60?%;display:flex;justify-content:center;align-items:center;color:#fff;margin-top:%?30?%}.invite-model .content-img[data-v-5b6778a0]{width:%?690?%;display:flex;justify-content:space-around;margin-top:%?50?%}.invite-model .content-img uni-image[data-v-5b6778a0]{width:%?200?%;height:%?200?%}.poster-box[data-v-5b6778a0]{width:%?600?%}.poster-box .btn-share[data-v-5b6778a0]{display:flex;justify-content:space-between;box-sizing:border-box;padding:%?20?% %?80?%}.poster-box .btn-share .button[data-v-5b6778a0]{background:#845ec2;padding:0 %?30?%;height:%?70?%;font-size:%?26?%;color:#fff;border-radius:%?30?%;text-align:center;line-height:%?70?%}.share-btn[data-v-5b6778a0]{background-color:#fff;margin:0;padding:0}.share-btn[data-v-5b6778a0]::after{border:none}.img-box[data-v-5b6778a0]{width:%?600?%;overflow:hidden}',""]),t.exports=e},daac:function(t,e,n){"use strict";n.r(e);var a=n("0b05"),i=n("26dd");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("b8f0");var o=n("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"5b6778a0",null,!1,a["a"],void 0);e["default"]=s.exports},eaf5:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.poster_container[data-v-0d2d3605]{opacity:0;display:block;position:fixed;z-index:-99;top:0;left:0;width:100vw;height:100vh;transition:opacity .5s}.poster_container .poster[data-v-0d2d3605]{background:url(https://xcooo.oss-cn-hangzhou.aliyuncs.com/wxapp/share_bg.png);background-size:100% 100%;background-repeat:no-repeat;position:absolute;width:%?610?%;height:%?950?%;top:54%;left:50%;-webkit-transform:translate3d(-50%,%?-575?%,0);transform:translate3d(-50%,%?-575?%,0)}.poster_container .poster .poster_close[data-v-0d2d3605]{position:absolute;top:-3%;right:-6%;z-index:9999999999999}.poster_container .poster .poster_qrcode[data-v-0d2d3605]{position:absolute;left:50%;bottom:28%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.poster_container .poster .poster_qrcode uni-image[data-v-0d2d3605]{width:%?300?%}.poster_container .poster_tool[data-v-0d2d3605]{position:absolute;left:0;bottom:0;z-index:99999999999;width:100vw;height:%?210?%;border-top-left-radius:%?30?%;border-top-right-radius:%?30?%;background-color:#fff;display:flex;justify-content:space-around;align-items:center;padding-bottom:env(safe-area-inset-bottom)}.poster_container .poster_tool .poster_tool_item[data-v-0d2d3605]{width:%?150?%;height:%?150?%;background-color:hsla(0,0%,90.2%,.3215686274509804);border-radius:%?15?%;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:%?23?%;color:hsla(0,0%,40%,.7215686274509804)}.poster_container .poster_tool .poster_tool_item uni-button[data-v-0d2d3605]{width:%?150?%;height:%?150?%;background-color:hsla(0,0%,96.1%,.3215686274509804);border-radius:%?15?%;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:%?23?%;color:hsla(0,0%,40%,.7215686274509804);padding:0}.poster_container .poster_tool .poster_tool_item uni-button[data-v-0d2d3605]::after{border:none;outline:none}.poster_container .poster_tool .poster_tool_item[data-v-0d2d3605]:hover{background-color:hsla(0,0%,87.5%,.3215686274509804)}.poster_container_active[data-v-0d2d3605]{opacity:1;z-index:99999999;background-color:rgba(0,0,0,.7)}',""]),t.exports=e},f18a:function(t,e,n){"use strict";var a=n("1cb5");a("flat")},fc94:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("bf0f"),n("d4b5"),n("4100");var i=a(n("9b1b")),r=a(n("2634")),o=a(n("2fdc")),s=a(n("80b1")),u=a(n("efe5")),l=n("ccb2"),c=function(){function t(e){(0,s.default)(this,t),this.drawPoster=e}return(0,u.default)(t,[{key:"clearCanvas",value:function(){var t=this.drawPoster.Context;t.clearRect(0,0,999999,999999)}},{key:"exportImage",value:function(){var t=this,e=this.drawPoster,n=e.exportImageDelayTime,a=e.showExportImagesTips,i=e.exportImageTips;return new Promise(function(){var e=(0,o.default)((0,r.default)().mark((function e(o){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a&&uni.showLoading({title:i}),e.next=3,(0,l.sleep)(n);case 3:return e.t0=o,e.next=6,t.createCanvasFilePath();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"createCanvasFilePath",value:function(){var t=this.drawPoster,e=(t.Context,t.canvas),n=t.canvasId,a=t._this,r=t.is2d,o=t.exportImageStyle,s=t.dpr,u=t.showExportImagesTips,l=t.showDrawTips,c=o.width,d=o.height,f=o.x,h=o.y,v=o.fileType,g=o.quality,p=o.destWidth,m=o.destHeight,w={};return p&&(w.destWidth=p),m&&(w.destHeight=m),r&&(c*=s,d*=s),new Promise((function(t){try{uni.canvasToTempFilePath((0,i.default)((0,i.default)({canvasId:n,canvas:e,x:f,y:h,width:Math.floor(c),height:Math.floor(d),quality:g,fileType:v},w),{},{success:function(e){return t({success:!0,data:e.tempFilePath,msg:"绘画成功"})},fail:function(e){return t({success:!1,msg:"导出图片失败: ".concat(JSON.stringify(e))})},complete:function(){(u||l)&&uni.hideLoading()}}),a)}catch(r){return t({success:!1,msg:"导出图片失败: 绘画错误"+r})}}))}},{key:"canvasDraw",value:function(){var t=this,e=this.drawPoster,n=e.Context,a=e.drawDelayTime,i=e.is2d;return new Promise(function(){var e=(0,o.default)((0,r.default)().mark((function e(s){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,l.sleep)(a);case 2:if(!i){e.next=10;break}return e.t0=s,e.next=6,t.exportImage();case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:return e.next=12,n.draw(!0,(0,o.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,t.exportImage();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"sortDrawArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.sort((function(t,e){var n=t.zIndex||0,a=e.zIndex||0;return n-a}))}}]),t}();e.default=c}}]);